var cov_1hyt7v392s=function(){var path="/home/khornya/L2INF/Projet/dames-chinoises/server.js",hash="c5ffab72f455264e84d420505225a090693ea4fa",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/home/khornya/L2INF/Projet/dames-chinoises/server.js",statementMap:{"0":{start:{line:1,column:0},end:{line:17,column:1}},"1":{start:{line:19,column:13},end:{line:19,column:35}},"2":{start:{line:21,column:14},end:{line:21,column:32}},"3":{start:{line:22,column:10},end:{line:22,column:19}},"4":{start:{line:23,column:11},end:{line:23,column:26}},"5":{start:{line:24,column:13},end:{line:24,column:29}},"6":{start:{line:25,column:9},end:{line:25,column:37}},"7":{start:{line:28,column:17},end:{line:28,column:39}},"8":{start:{line:29,column:0},end:{line:29,column:52}},"9":{start:{line:30,column:0},end:{line:30,column:27}},"10":{start:{line:31,column:0},end:{line:31,column:28}},"11":{start:{line:32,column:0},end:{line:32,column:30}},"12":{start:{line:34,column:0},end:{line:131,column:3}},"13":{start:{line:35,column:2},end:{line:130,column:3}},"14":{start:{line:36,column:4},end:{line:36,column:27}},"15":{start:{line:38,column:7},end:{line:130,column:3}},"16":{start:{line:39,column:20},end:{line:39,column:54}},"17":{start:{line:40,column:21},end:{line:40,column:56}},"18":{start:{line:41,column:18},end:{line:41,column:142}},"19":{start:{line:42,column:18},end:{line:42,column:142}},"20":{start:{line:43,column:18},end:{line:43,column:142}},"21":{start:{line:44,column:18},end:{line:44,column:142}},"22":{start:{line:45,column:18},end:{line:45,column:142}},"23":{start:{line:46,column:18},end:{line:46,column:142}},"24":{start:{line:47,column:16},end:{line:47,column:46}},"25":{start:{line:48,column:16},end:{line:48,column:46}},"26":{start:{line:49,column:16},end:{line:49,column:46}},"27":{start:{line:50,column:16},end:{line:50,column:46}},"28":{start:{line:51,column:16},end:{line:51,column:46}},"29":{start:{line:52,column:16},end:{line:52,column:46}},"30":{start:{line:54,column:18},end:{line:54,column:67}},"31":{start:{line:55,column:20},end:{line:55,column:55}},"32":{start:{line:56,column:23},end:{line:56,column:51}},"33":{start:{line:57,column:27},end:{line:57,column:31}},"34":{start:{line:58,column:31},end:{line:58,column:35}},"35":{start:{line:59,column:4},end:{line:65,column:5}},"36":{start:{line:60,column:6},end:{line:60,column:100}},"37":{start:{line:60,column:75},end:{line:60,column:100}},"38":{start:{line:61,column:6},end:{line:64,column:7}},"39":{start:{line:62,column:8},end:{line:62,column:30}},"40":{start:{line:62,column:21},end:{line:62,column:30}},"41":{start:{line:63,column:8},end:{line:63,column:68}},"42":{start:{line:63,column:39},end:{line:63,column:68}},"43":{start:{line:66,column:4},end:{line:99,column:5}},"44":{start:{line:67,column:6},end:{line:67,column:77}},"45":{start:{line:69,column:9},end:{line:99,column:5}},"46":{start:{line:70,column:6},end:{line:70,column:66}},"47":{start:{line:72,column:9},end:{line:99,column:5}},"48":{start:{line:73,column:6},end:{line:73,column:44}},"49":{start:{line:75,column:9},end:{line:99,column:5}},"50":{start:{line:76,column:6},end:{line:76,column:44}},"51":{start:{line:80,column:19},end:{line:80,column:49}},"52":{start:{line:81,column:6},end:{line:98,column:9}},"53":{start:{line:101,column:7},end:{line:130,column:3}},"54":{start:{line:102,column:17},end:{line:102,column:48}},"55":{start:{line:103,column:17},end:{line:103,column:48}},"56":{start:{line:104,column:22},end:{line:104,column:46}},"57":{start:{line:105,column:20},end:{line:105,column:55}},"58":{start:{line:106,column:4},end:{line:126,column:5}},"59":{start:{line:107,column:6},end:{line:107,column:53}},"60":{start:{line:109,column:9},end:{line:126,column:5}},"61":{start:{line:110,column:6},end:{line:110,column:44}},"62":{start:{line:113,column:6},end:{line:125,column:7}},"63":{start:{line:114,column:8},end:{line:114,column:59}},"64":{start:{line:116,column:11},end:{line:125,column:7}},"65":{start:{line:117,column:8},end:{line:117,column:64}},"66":{start:{line:120,column:8},end:{line:124,column:11}},"67":{start:{line:129,column:4},end:{line:129,column:80}},"68":{start:{line:133,column:0},end:{line:151,column:3}},"69":{start:{line:134,column:2},end:{line:150,column:3}},"70":{start:{line:135,column:4},end:{line:135,column:27}},"71":{start:{line:138,column:15},end:{line:138,column:33}},"72":{start:{line:139,column:16},end:{line:139,column:45}},"73":{start:{line:140,column:22},end:{line:140,column:47}},"74":{start:{line:141,column:22},end:{line:141,column:47}},"75":{start:{line:142,column:22},end:{line:142,column:47}},"76":{start:{line:143,column:22},end:{line:143,column:47}},"77":{start:{line:144,column:22},end:{line:144,column:47}},"78":{start:{line:145,column:14},end:{line:145,column:285}},"79":{start:{line:146,column:4},end:{line:148,column:7}},"80":{start:{line:147,column:6},end:{line:147,column:29}},"81":{start:{line:147,column:17},end:{line:147,column:29}},"82":{start:{line:149,column:4},end:{line:149,column:29}},"83":{start:{line:153,column:12},end:{line:153,column:28}},"84":{start:{line:154,column:15},end:{line:160,column:1}},"85":{start:{line:165,column:2},end:{line:165,column:48}},"86":{start:{line:168,column:2},end:{line:173,column:5}},"87":{start:{line:169,column:4},end:{line:172,column:5}},"88":{start:{line:170,column:6},end:{line:170,column:57}},"89":{start:{line:171,column:6},end:{line:171,column:41}},"90":{start:{line:175,column:2},end:{line:182,column:5}},"91":{start:{line:176,column:4},end:{line:176,column:35}},"92":{start:{line:177,column:4},end:{line:181,column:5}},"93":{start:{line:178,column:6},end:{line:178,column:25}},"94":{start:{line:180,column:6},end:{line:180,column:18}},"95":{start:{line:185,column:0},end:{line:185,column:19}},"96":{start:{line:187,column:12},end:{line:187,column:36}},"97":{start:{line:189,column:0},end:{line:189,column:20}},"98":{start:{line:191,column:0},end:{line:207,column:3}},"99":{start:{line:192,column:2},end:{line:206,column:5}},"100":{start:{line:193,column:4},end:{line:193,column:27}},"101":{start:{line:193,column:15},end:{line:193,column:27}},"102":{start:{line:194,column:4},end:{line:205,column:7}},"103":{start:{line:209,column:0},end:{line:211,column:3}},"104":{start:{line:210,column:2},end:{line:210,column:25}},"105":{start:{line:213,column:0},end:{line:213,column:35}},"106":{start:{line:215,column:12},end:{line:215,column:14}},"107":{start:{line:217,column:14},end:{line:217,column:16}},"108":{start:{line:219,column:0},end:{line:318,column:3}},"109":{start:{line:220,column:2},end:{line:259,column:5}},"110":{start:{line:221,column:4},end:{line:221,column:40}},"111":{start:{line:222,column:26},end:{line:222,column:27}},"112":{start:{line:223,column:4},end:{line:225,column:5}},"113":{start:{line:224,column:6},end:{line:224,column:54}},"114":{start:{line:224,column:36},end:{line:224,column:54}},"115":{start:{line:226,column:4},end:{line:237,column:6}},"116":{start:{line:239,column:4},end:{line:239,column:43}},"117":{start:{line:240,column:4},end:{line:244,column:6}},"118":{start:{line:245,column:4},end:{line:258,column:5}},"119":{start:{line:246,column:20},end:{line:246,column:52}},"120":{start:{line:247,column:6},end:{line:254,column:7}},"121":{start:{line:248,column:8},end:{line:253,column:9}},"122":{start:{line:252,column:10},end:{line:252,column:59}},"123":{start:{line:255,column:6},end:{line:255,column:46}},"124":{start:{line:256,column:6},end:{line:256,column:34}},"125":{start:{line:257,column:6},end:{line:257,column:77}},"126":{start:{line:260,column:2},end:{line:290,column:5}},"127":{start:{line:261,column:4},end:{line:261,column:38}},"128":{start:{line:262,column:4},end:{line:265,column:5}},"129":{start:{line:263,column:6},end:{line:263,column:58}},"130":{start:{line:264,column:6},end:{line:264,column:13}},"131":{start:{line:266,column:4},end:{line:266,column:43}},"132":{start:{line:267,column:4},end:{line:267,column:44}},"133":{start:{line:268,column:4},end:{line:268,column:58}},"134":{start:{line:269,column:12},end:{line:269,column:51}},"135":{start:{line:270,column:4},end:{line:274,column:6}},"136":{start:{line:275,column:4},end:{line:275,column:103}},"137":{start:{line:276,column:4},end:{line:289,column:5}},"138":{start:{line:277,column:20},end:{line:277,column:52}},"139":{start:{line:278,column:6},end:{line:285,column:7}},"140":{start:{line:279,column:8},end:{line:284,column:9}},"141":{start:{line:283,column:10},end:{line:283,column:59}},"142":{start:{line:286,column:6},end:{line:286,column:46}},"143":{start:{line:287,column:6},end:{line:287,column:34}},"144":{start:{line:288,column:6},end:{line:288,column:77}},"145":{start:{line:291,column:2},end:{line:294,column:5}},"146":{start:{line:292,column:4},end:{line:292,column:41}},"147":{start:{line:293,column:4},end:{line:293,column:77}},"148":{start:{line:295,column:2},end:{line:303,column:5}},"149":{start:{line:296,column:4},end:{line:302,column:5}},"150":{start:{line:297,column:6},end:{line:297,column:95}},"151":{start:{line:298,column:6},end:{line:301,column:7}},"152":{start:{line:299,column:8},end:{line:299,column:61}},"153":{start:{line:300,column:8},end:{line:300,column:71}},"154":{start:{line:304,column:2},end:{line:309,column:3}},"155":{start:{line:305,column:4},end:{line:308,column:5}},"156":{start:{line:306,column:6},end:{line:306,column:64}},"157":{start:{line:307,column:6},end:{line:307,column:47}},"158":{start:{line:310,column:2},end:{line:317,column:5}},"159":{start:{line:311,column:4},end:{line:311,column:59}},"160":{start:{line:312,column:4},end:{line:316,column:5}},"161":{start:{line:313,column:6},end:{line:313,column:52}},"162":{start:{line:314,column:6},end:{line:314,column:63}},"163":{start:{line:315,column:6},end:{line:315,column:73}},"164":{start:{line:321,column:23},end:{line:328,column:1}},"165":{start:{line:333,column:2},end:{line:333,column:32}},"166":{start:{line:334,column:2},end:{line:341,column:3}},"167":{start:{line:335,column:4},end:{line:340,column:7}},"168":{start:{line:342,column:2},end:{line:342,column:30}},"169":{start:{line:343,column:2},end:{line:343,column:25}},"170":{start:{line:348,column:2},end:{line:348,column:54}},"171":{start:{line:349,column:2},end:{line:351,column:3}},"172":{start:{line:350,column:4},end:{line:350,column:42}},"173":{start:{line:352,column:2},end:{line:352,column:30}},"174":{start:{line:353,column:2},end:{line:353,column:34}},"175":{start:{line:354,column:2},end:{line:354,column:36}},"176":{start:{line:355,column:2},end:{line:355,column:112}},"177":{start:{line:356,column:2},end:{line:356,column:85}},"178":{start:{line:357,column:2},end:{line:357,column:36}},"179":{start:{line:362,column:2},end:{line:362,column:55}},"180":{start:{line:362,column:18},end:{line:362,column:55}},"181":{start:{line:363,column:2},end:{line:363,column:55}},"182":{start:{line:363,column:18},end:{line:363,column:55}},"183":{start:{line:364,column:2},end:{line:364,column:82}},"184":{start:{line:364,column:17},end:{line:364,column:82}},"185":{start:{line:365,column:2},end:{line:365,column:82}},"186":{start:{line:365,column:17},end:{line:365,column:82}},"187":{start:{line:366,column:2},end:{line:366,column:82}},"188":{start:{line:366,column:17},end:{line:366,column:82}},"189":{start:{line:367,column:2},end:{line:367,column:82}},"190":{start:{line:367,column:17},end:{line:367,column:82}},"191":{start:{line:373,column:2},end:{line:373,column:18}},"192":{start:{line:374,column:2},end:{line:374,column:10}},"193":{start:{line:375,column:2},end:{line:375,column:59}},"194":{start:{line:376,column:2},end:{line:376,column:38}},"195":{start:{line:376,column:25},end:{line:376,column:38}},"196":{start:{line:377,column:2},end:{line:381,column:4}},"197":{start:{line:378,column:4},end:{line:380,column:20}},"198":{start:{line:380,column:7},end:{line:380,column:20}},"199":{start:{line:382,column:3},end:{line:382,column:15}},"200":{start:{line:386,column:2},end:{line:386,column:39}},"201":{start:{line:387,column:2},end:{line:387,column:29}},"202":{start:{line:388,column:12},end:{line:388,column:24}},"203":{start:{line:389,column:12},end:{line:389,column:24}},"204":{start:{line:391,column:2},end:{line:400,column:3}},"205":{start:{line:392,column:4},end:{line:399,column:5}},"206":{start:{line:393,column:7},end:{line:398,column:8}},"207":{start:{line:394,column:9},end:{line:396,column:56}},"208":{start:{line:396,column:12},end:{line:396,column:56}},"209":{start:{line:397,column:9},end:{line:397,column:72}},"210":{start:{line:397,column:45},end:{line:397,column:72}},"211":{start:{line:401,column:2},end:{line:401,column:53}},"212":{start:{line:402,column:2},end:{line:406,column:20}},"213":{start:{line:403,column:15},end:{line:403,column:100}},"214":{start:{line:403,column:62},end:{line:403,column:97}},"215":{start:{line:404,column:4},end:{line:404,column:16}},"216":{start:{line:406,column:7},end:{line:406,column:20}},"217":{start:{line:412,column:2},end:{line:412,column:35}},"218":{start:{line:412,column:22},end:{line:412,column:35}},"219":{start:{line:416,column:20},end:{line:416,column:22}},"220":{start:{line:417,column:12},end:{line:417,column:23}},"221":{start:{line:417,column:35},end:{line:417,column:46}},"222":{start:{line:420,column:2},end:{line:448,column:3}},"223":{start:{line:421,column:4},end:{line:447,column:5}},"224":{start:{line:422,column:6},end:{line:422,column:23}},"225":{start:{line:423,column:6},end:{line:423,column:23}},"226":{start:{line:424,column:6},end:{line:427,column:7}},"227":{start:{line:425,column:8},end:{line:425,column:22}},"228":{start:{line:426,column:8},end:{line:426,column:22}},"229":{start:{line:428,column:6},end:{line:428,column:10}},"230":{start:{line:429,column:6},end:{line:432,column:7}},"231":{start:{line:430,column:8},end:{line:430,column:64}},"232":{start:{line:430,column:58},end:{line:430,column:64}},"233":{start:{line:431,column:8},end:{line:431,column:77}},"234":{start:{line:431,column:72},end:{line:431,column:77}},"235":{start:{line:433,column:6},end:{line:446,column:7}},"236":{start:{line:434,column:8},end:{line:434,column:33}},"237":{start:{line:435,column:8},end:{line:435,column:33}},"238":{start:{line:436,column:8},end:{line:436,column:60}},"239":{start:{line:436,column:50},end:{line:436,column:60}},"240":{start:{line:437,column:8},end:{line:445,column:9}},"241":{start:{line:438,column:10},end:{line:440,column:68}},"242":{start:{line:440,column:12},end:{line:440,column:68}},"243":{start:{line:441,column:10},end:{line:444,column:52}},"244":{start:{line:442,column:12},end:{line:442,column:88}},"245":{start:{line:444,column:15},end:{line:444,column:52}},"246":{start:{line:449,column:2},end:{line:450,column:85}},"247":{start:{line:456,column:12},end:{line:456,column:37}},"248":{start:{line:457,column:2},end:{line:461,column:3}},"249":{start:{line:458,column:4},end:{line:458,column:36}},"250":{start:{line:459,column:4},end:{line:459,column:36}},"251":{start:{line:460,column:4},end:{line:460,column:68}},"252":{start:{line:460,column:55},end:{line:460,column:68}},"253":{start:{line:462,column:2},end:{line:465,column:3}},"254":{start:{line:463,column:4},end:{line:464,column:66}},"255":{start:{line:464,column:6},end:{line:464,column:66}},"256":{start:{line:466,column:2},end:{line:466,column:84}},"257":{start:{line:471,column:2},end:{line:471,column:72}},"258":{start:{line:476,column:10},end:{line:476,column:22}},"259":{start:{line:477,column:2},end:{line:481,column:3}},"260":{start:{line:478,column:4},end:{line:480,column:5}},"261":{start:{line:479,column:6},end:{line:479,column:18}},"262":{start:{line:482,column:2},end:{line:482,column:15}},"263":{start:{line:487,column:13},end:{line:487,column:44}},"264":{start:{line:488,column:14},end:{line:488,column:46}},"265":{start:{line:489,column:20},end:{line:489,column:76}},"266":{start:{line:489,column:60},end:{line:489,column:75}},"267":{start:{line:490,column:2},end:{line:492,column:4}},"268":{start:{line:491,column:4},end:{line:491,column:50}},"269":{start:{line:493,column:16},end:{line:501,column:3}},"270":{start:{line:494,column:14},end:{line:494,column:16}},"271":{start:{line:495,column:3},end:{line:497,column:6}},"272":{start:{line:496,column:8},end:{line:496,column:22}},"273":{start:{line:498,column:3},end:{line:500,column:5}},"274":{start:{line:499,column:6},end:{line:499,column:27}},"275":{start:{line:502,column:1},end:{line:504,column:4}},"276":{start:{line:503,column:3},end:{line:503,column:19}},"277":{start:{line:505,column:1},end:{line:505,column:15}},"278":{start:{line:509,column:2},end:{line:509,column:70}},"279":{start:{line:509,column:63},end:{line:509,column:70}},"280":{start:{line:510,column:2},end:{line:510,column:40}},"281":{start:{line:510,column:33},end:{line:510,column:40}},"282":{start:{line:511,column:2},end:{line:511,column:38}},"283":{start:{line:513,column:16},end:{line:513,column:19}},"284":{start:{line:514,column:27},end:{line:514,column:28}},"285":{start:{line:516,column:12},end:{line:516,column:13}},"286":{start:{line:517,column:2},end:{line:546,column:3}},"287":{start:{line:518,column:4},end:{line:545,column:5}},"288":{start:{line:519,column:6},end:{line:544,column:7}},"289":{start:{line:520,column:8},end:{line:520,column:70}},"290":{start:{line:521,column:8},end:{line:521,column:44}},"291":{start:{line:522,column:8},end:{line:522,column:47}},"292":{start:{line:523,column:8},end:{line:523,column:70}},"293":{start:{line:524,column:8},end:{line:543,column:9}},"294":{start:{line:525,column:10},end:{line:525,column:112}},"295":{start:{line:526,column:10},end:{line:526,column:41}},"296":{start:{line:526,column:41},end:{line:526,column:70}},"297":{start:{line:527,column:10},end:{line:527,column:65}},"298":{start:{line:528,column:10},end:{line:528,column:104}},"299":{start:{line:529,column:10},end:{line:529,column:42}},"300":{start:{line:530,column:10},end:{line:530,column:29}},"301":{start:{line:531,column:10},end:{line:531,column:18}},"302":{start:{line:532,column:10},end:{line:532,column:52}},"303":{start:{line:532,column:54},end:{line:532,column:96}},"304":{start:{line:533,column:10},end:{line:533,column:60}},"305":{start:{line:534,column:10},end:{line:534,column:70}},"306":{start:{line:535,column:10},end:{line:535,column:70}},"307":{start:{line:537,column:10},end:{line:537,column:76}},"308":{start:{line:538,column:10},end:{line:538,column:76}},"309":{start:{line:539,column:10},end:{line:542,column:11}},"310":{start:{line:540,column:12},end:{line:540,column:31}},"311":{start:{line:541,column:12},end:{line:541,column:42}},"312":{start:{line:547,column:2},end:{line:547,column:100}},"313":{start:{line:548,column:2},end:{line:548,column:46}},"314":{start:{line:549,column:2},end:{line:549,column:72}},"315":{start:{line:550,column:2},end:{line:550,column:84}},"316":{start:{line:551,column:2},end:{line:551,column:59}},"317":{start:{line:552,column:2},end:{line:552,column:47}},"318":{start:{line:553,column:2},end:{line:553,column:58}},"319":{start:{line:554,column:2},end:{line:557,column:28}},"320":{start:{line:555,column:4},end:{line:555,column:99}},"321":{start:{line:556,column:4},end:{line:556,column:41}},"322":{start:{line:558,column:2},end:{line:558,column:63}},"323":{start:{line:559,column:2},end:{line:569,column:3}},"324":{start:{line:560,column:4},end:{line:560,column:37}},"325":{start:{line:561,column:4},end:{line:563,column:30}},"326":{start:{line:562,column:6},end:{line:562,column:146}},"327":{start:{line:564,column:4},end:{line:567,column:7}},"328":{start:{line:565,column:6},end:{line:566,column:60}},"329":{start:{line:565,column:17},end:{line:565,column:70}},"330":{start:{line:566,column:11},end:{line:566,column:60}},"331":{start:{line:568,column:4},end:{line:568,column:16}},"332":{start:{line:570,column:2},end:{line:570,column:86}},"333":{start:{line:571,column:2},end:{line:571,column:129}},"334":{start:{line:571,column:26},end:{line:571,column:102}},"335":{start:{line:572,column:2},end:{line:572,column:33}},"336":{start:{line:576,column:15},end:{line:576,column:38}},"337":{start:{line:577,column:2},end:{line:580,column:3}},"338":{start:{line:578,column:4},end:{line:578,column:80}},"339":{start:{line:579,column:4},end:{line:579,column:11}},"340":{start:{line:581,column:12},end:{line:581,column:19}},"341":{start:{line:582,column:12},end:{line:582,column:19}},"342":{start:{line:583,column:18},end:{line:583,column:44}},"343":{start:{line:584,column:15},end:{line:584,column:38}},"344":{start:{line:585,column:20},end:{line:585,column:48}},"345":{start:{line:586,column:18},end:{line:586,column:44}},"346":{start:{line:587,column:16},end:{line:587,column:40}},"347":{start:{line:588,column:13},end:{line:588,column:34}},"348":{start:{line:589,column:21},end:{line:589,column:50}},"349":{start:{line:590,column:2},end:{line:643,column:3}},"350":{start:{line:591,column:4},end:{line:595,column:5}},"351":{start:{line:592,column:6},end:{line:593,column:110}},"352":{start:{line:592,column:33},end:{line:592,column:122}},"353":{start:{line:593,column:11},end:{line:593,column:110}},"354":{start:{line:594,column:6},end:{line:594,column:19}},"355":{start:{line:596,column:4},end:{line:596,column:43}},"356":{start:{line:597,column:4},end:{line:597,column:48}},"357":{start:{line:598,column:4},end:{line:598,column:55}},"358":{start:{line:599,column:4},end:{line:599,column:46}},"359":{start:{line:600,column:4},end:{line:600,column:17}},"360":{start:{line:603,column:4},end:{line:608,column:5}},"361":{start:{line:604,column:6},end:{line:604,column:57}},"362":{start:{line:605,column:6},end:{line:605,column:37}},"363":{start:{line:606,column:6},end:{line:606,column:72}},"364":{start:{line:607,column:6},end:{line:607,column:19}},"365":{start:{line:609,column:4},end:{line:612,column:5}},"366":{start:{line:610,column:6},end:{line:610,column:79}},"367":{start:{line:611,column:6},end:{line:611,column:19}},"368":{start:{line:613,column:4},end:{line:616,column:5}},"369":{start:{line:614,column:6},end:{line:614,column:82}},"370":{start:{line:615,column:6},end:{line:615,column:19}},"371":{start:{line:617,column:4},end:{line:620,column:5}},"372":{start:{line:618,column:6},end:{line:618,column:77}},"373":{start:{line:619,column:6},end:{line:619,column:19}},"374":{start:{line:621,column:4},end:{line:624,column:5}},"375":{start:{line:622,column:6},end:{line:622,column:94}},"376":{start:{line:623,column:6},end:{line:623,column:19}},"377":{start:{line:625,column:4},end:{line:625,column:44}},"378":{start:{line:626,column:4},end:{line:626,column:48}},"379":{start:{line:627,column:4},end:{line:627,column:60}},"380":{start:{line:628,column:4},end:{line:628,column:99}},"381":{start:{line:629,column:4},end:{line:629,column:48}},"382":{start:{line:630,column:4},end:{line:638,column:5}},"383":{start:{line:631,column:6},end:{line:631,column:39}},"384":{start:{line:632,column:6},end:{line:632,column:112}},"385":{start:{line:633,column:6},end:{line:636,column:9}},"386":{start:{line:634,column:8},end:{line:635,column:62}},"387":{start:{line:634,column:19},end:{line:634,column:72}},"388":{start:{line:635,column:13},end:{line:635,column:62}},"389":{start:{line:637,column:6},end:{line:637,column:17}},"390":{start:{line:639,column:4},end:{line:639,column:71}},"391":{start:{line:640,column:4},end:{line:640,column:80}},"392":{start:{line:641,column:4},end:{line:641,column:35}},"393":{start:{line:642,column:4},end:{line:642,column:16}},"394":{start:{line:647,column:2},end:{line:647,column:46}},"395":{start:{line:647,column:33},end:{line:647,column:46}},"396":{start:{line:648,column:2},end:{line:649,column:79}},"397":{start:{line:649,column:4},end:{line:649,column:79}},"398":{start:{line:649,column:66},end:{line:649,column:79}},"399":{start:{line:650,column:2},end:{line:650,column:81}},"400":{start:{line:650,column:26},end:{line:650,column:54}},"401":{start:{line:651,column:2},end:{line:653,column:3}},"402":{start:{line:652,column:4},end:{line:652,column:88}},"403":{start:{line:652,column:28},end:{line:652,column:61}},"404":{start:{line:654,column:2},end:{line:654,column:30}},"405":{start:{line:655,column:2},end:{line:655,column:14}},"406":{start:{line:659,column:17},end:{line:659,column:24}},"407":{start:{line:660,column:15},end:{line:660,column:22}},"408":{start:{line:661,column:2},end:{line:661,column:60}},"409":{start:{line:662,column:2},end:{line:662,column:65}},"410":{start:{line:663,column:2},end:{line:665,column:3}},"411":{start:{line:664,column:4},end:{line:664,column:52}},"412":{start:{line:669,column:2},end:{line:669,column:47}},"413":{start:{line:669,column:36},end:{line:669,column:47}},"414":{start:{line:670,column:2},end:{line:675,column:31}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:34,column:18},end:{line:34,column:19}},loc:{start:{line:34,column:46},end:{line:131,column:1}},line:34},"1":{name:"(anonymous_1)",decl:{start:{line:133,column:17},end:{line:133,column:18}},loc:{start:{line:133,column:43},end:{line:151,column:1}},line:133},"2":{name:"(anonymous_2)",decl:{start:{line:146,column:26},end:{line:146,column:27}},loc:{start:{line:146,column:56},end:{line:148,column:5}},line:146},"3":{name:"handleDisconnect",decl:{start:{line:164,column:9},end:{line:164,column:25}},loc:{start:{line:164,column:28},end:{line:183,column:1}},line:164},"4":{name:"(anonymous_4)",decl:{start:{line:168,column:21},end:{line:168,column:22}},loc:{start:{line:168,column:37},end:{line:173,column:3}},line:168},"5":{name:"(anonymous_5)",decl:{start:{line:175,column:25},end:{line:175,column:26}},loc:{start:{line:175,column:41},end:{line:182,column:3}},line:175},"6":{name:"(anonymous_6)",decl:{start:{line:191,column:13},end:{line:191,column:14}},loc:{start:{line:191,column:41},end:{line:207,column:1}},line:191},"7":{name:"(anonymous_7)",decl:{start:{line:192,column:94},end:{line:192,column:95}},loc:{start:{line:192,column:124},end:{line:206,column:3}},line:192},"8":{name:"(anonymous_8)",decl:{start:{line:209,column:17},end:{line:209,column:18}},loc:{start:{line:209,column:46},end:{line:211,column:1}},line:209},"9":{name:"(anonymous_9)",decl:{start:{line:219,column:20},end:{line:219,column:21}},loc:{start:{line:219,column:38},end:{line:318,column:1}},line:219},"10":{name:"(anonymous_10)",decl:{start:{line:220,column:27},end:{line:220,column:28}},loc:{start:{line:220,column:43},end:{line:259,column:3}},line:220},"11":{name:"(anonymous_11)",decl:{start:{line:260,column:25},end:{line:260,column:26}},loc:{start:{line:260,column:41},end:{line:290,column:3}},line:260},"12":{name:"(anonymous_12)",decl:{start:{line:291,column:28},end:{line:291,column:29}},loc:{start:{line:291,column:44},end:{line:294,column:3}},line:291},"13":{name:"(anonymous_13)",decl:{start:{line:295,column:29},end:{line:295,column:30}},loc:{start:{line:295,column:47},end:{line:303,column:3}},line:295},"14":{name:"(anonymous_14)",decl:{start:{line:304,column:26},end:{line:304,column:27}},loc:{start:{line:304,column:44},end:{line:309,column:1}},line:304},"15":{name:"(anonymous_15)",decl:{start:{line:310,column:31},end:{line:310,column:32}},loc:{start:{line:310,column:43},end:{line:317,column:3}},line:310},"16":{name:"init",decl:{start:{line:331,column:9},end:{line:331,column:13}},loc:{start:{line:331,column:29},end:{line:344,column:1}},line:331},"17":{name:"restart",decl:{start:{line:347,column:9},end:{line:347,column:16}},loc:{start:{line:347,column:32},end:{line:358,column:1}},line:347},"18":{name:"isMovingBackward",decl:{start:{line:360,column:9},end:{line:360,column:25}},loc:{start:{line:360,column:53},end:{line:368,column:1}},line:360},"19":{name:"sameTraject",decl:{start:{line:371,column:9},end:{line:371,column:20}},loc:{start:{line:371,column:42},end:{line:383,column:1}},line:371},"20":{name:"getPath",decl:{start:{line:385,column:9},end:{line:385,column:16}},loc:{start:{line:385,column:52},end:{line:407,column:1}},line:385},"21":{name:"(anonymous_21)",decl:{start:{line:403,column:44},end:{line:403,column:45}},loc:{start:{line:403,column:60},end:{line:403,column:99}},line:403},"22":{name:"getJumps",decl:{start:{line:411,column:9},end:{line:411,column:17}},loc:{start:{line:411,column:59},end:{line:451,column:1}},line:411},"23":{name:"hasWon",decl:{start:{line:454,column:9},end:{line:454,column:15}},loc:{start:{line:454,column:38},end:{line:467,column:1}},line:454},"24":{name:"isOnGameBoard",decl:{start:{line:470,column:9},end:{line:470,column:22}},loc:{start:{line:470,column:29},end:{line:472,column:1}},line:470},"25":{name:"contains",decl:{start:{line:475,column:9},end:{line:475,column:17}},loc:{start:{line:475,column:34},end:{line:483,column:1}},line:475},"26":{name:"sendScore",decl:{start:{line:486,column:9},end:{line:486,column:18}},loc:{start:{line:486,column:52},end:{line:506,column:1}},line:486},"27":{name:"(anonymous_27)",decl:{start:{line:489,column:52},end:{line:489,column:53}},loc:{start:{line:489,column:60},end:{line:489,column:75}},line:489},"28":{name:"(anonymous_28)",decl:{start:{line:490,column:22},end:{line:490,column:23}},loc:{start:{line:490,column:52},end:{line:492,column:3}},line:490},"29":{name:"(anonymous_29)",decl:{start:{line:493,column:275},end:{line:493,column:276}},loc:{start:{line:493,column:294},end:{line:501,column:2}},line:493},"30":{name:"(anonymous_30)",decl:{start:{line:495,column:23},end:{line:495,column:24}},loc:{start:{line:495,column:39},end:{line:497,column:4}},line:495},"31":{name:"(anonymous_31)",decl:{start:{line:498,column:22},end:{line:498,column:23}},loc:{start:{line:498,column:33},end:{line:500,column:3}},line:498},"32":{name:"(anonymous_32)",decl:{start:{line:502,column:21},end:{line:502,column:22}},loc:{start:{line:502,column:36},end:{line:504,column:2}},line:502},"33":{name:"makeBestMove",decl:{start:{line:508,column:9},end:{line:508,column:21}},loc:{start:{line:508,column:37},end:{line:573,column:1}},line:508},"34":{name:"(anonymous_34)",decl:{start:{line:554,column:13},end:{line:554,column:14}},loc:{start:{line:554,column:24},end:{line:557,column:3}},line:554},"35":{name:"(anonymous_35)",decl:{start:{line:561,column:15},end:{line:561,column:16}},loc:{start:{line:561,column:26},end:{line:563,column:5}},line:561},"36":{name:"(anonymous_36)",decl:{start:{line:564,column:80},end:{line:564,column:81}},loc:{start:{line:564,column:96},end:{line:567,column:5}},line:564},"37":{name:"(anonymous_37)",decl:{start:{line:571,column:13},end:{line:571,column:14}},loc:{start:{line:571,column:24},end:{line:571,column:104}},line:571},"38":{name:"validateMove",decl:{start:{line:575,column:9},end:{line:575,column:21}},loc:{start:{line:575,column:64},end:{line:644,column:1}},line:575},"39":{name:"(anonymous_39)",decl:{start:{line:633,column:65},end:{line:633,column:66}},loc:{start:{line:633,column:81},end:{line:636,column:7}},line:633},"40":{name:"play",decl:{start:{line:646,column:9},end:{line:646,column:13}},loc:{start:{line:646,column:56},end:{line:656,column:1}},line:646},"41":{name:"(anonymous_41)",decl:{start:{line:650,column:13},end:{line:650,column:14}},loc:{start:{line:650,column:24},end:{line:650,column:56}},line:650},"42":{name:"(anonymous_42)",decl:{start:{line:652,column:15},end:{line:652,column:16}},loc:{start:{line:652,column:26},end:{line:652,column:63}},line:652},"43":{name:"move",decl:{start:{line:658,column:9},end:{line:658,column:13}},loc:{start:{line:658,column:48},end:{line:666,column:1}},line:658},"44":{name:"escapeHtml",decl:{start:{line:668,column:9},end:{line:668,column:19}},loc:{start:{line:668,column:26},end:{line:676,column:1}},line:668}},branchMap:{"0":{loc:{start:{line:35,column:2},end:{line:130,column:3}},type:"if",locations:[{start:{line:35,column:2},end:{line:130,column:3}},{start:{line:35,column:2},end:{line:130,column:3}}],line:35},"1":{loc:{start:{line:35,column:6},end:{line:35,column:117}},type:"binary-expr",locations:[{start:{line:35,column:6},end:{line:35,column:59}},{start:{line:35,column:63},end:{line:35,column:117}}],line:35},"2":{loc:{start:{line:38,column:7},end:{line:130,column:3}},type:"if",locations:[{start:{line:38,column:7},end:{line:130,column:3}},{start:{line:38,column:7},end:{line:130,column:3}}],line:38},"3":{loc:{start:{line:41,column:18},end:{line:41,column:142}},type:"cond-expr",locations:[{start:{line:41,column:97},end:{line:41,column:129}},{start:{line:41,column:132},end:{line:41,column:142}}],line:41},"4":{loc:{start:{line:41,column:19},end:{line:41,column:94}},type:"binary-expr",locations:[{start:{line:41,column:19},end:{line:41,column:63}},{start:{line:41,column:67},end:{line:41,column:94}}],line:41},"5":{loc:{start:{line:42,column:18},end:{line:42,column:142}},type:"cond-expr",locations:[{start:{line:42,column:97},end:{line:42,column:129}},{start:{line:42,column:132},end:{line:42,column:142}}],line:42},"6":{loc:{start:{line:42,column:19},end:{line:42,column:94}},type:"binary-expr",locations:[{start:{line:42,column:19},end:{line:42,column:63}},{start:{line:42,column:67},end:{line:42,column:94}}],line:42},"7":{loc:{start:{line:43,column:18},end:{line:43,column:142}},type:"cond-expr",locations:[{start:{line:43,column:97},end:{line:43,column:129}},{start:{line:43,column:132},end:{line:43,column:142}}],line:43},"8":{loc:{start:{line:43,column:19},end:{line:43,column:94}},type:"binary-expr",locations:[{start:{line:43,column:19},end:{line:43,column:63}},{start:{line:43,column:67},end:{line:43,column:94}}],line:43},"9":{loc:{start:{line:44,column:18},end:{line:44,column:142}},type:"cond-expr",locations:[{start:{line:44,column:97},end:{line:44,column:129}},{start:{line:44,column:132},end:{line:44,column:142}}],line:44},"10":{loc:{start:{line:44,column:19},end:{line:44,column:94}},type:"binary-expr",locations:[{start:{line:44,column:19},end:{line:44,column:63}},{start:{line:44,column:67},end:{line:44,column:94}}],line:44},"11":{loc:{start:{line:45,column:18},end:{line:45,column:142}},type:"cond-expr",locations:[{start:{line:45,column:97},end:{line:45,column:129}},{start:{line:45,column:132},end:{line:45,column:142}}],line:45},"12":{loc:{start:{line:45,column:19},end:{line:45,column:94}},type:"binary-expr",locations:[{start:{line:45,column:19},end:{line:45,column:63}},{start:{line:45,column:67},end:{line:45,column:94}}],line:45},"13":{loc:{start:{line:46,column:18},end:{line:46,column:142}},type:"cond-expr",locations:[{start:{line:46,column:97},end:{line:46,column:129}},{start:{line:46,column:132},end:{line:46,column:142}}],line:46},"14":{loc:{start:{line:46,column:19},end:{line:46,column:94}},type:"binary-expr",locations:[{start:{line:46,column:19},end:{line:46,column:63}},{start:{line:46,column:67},end:{line:46,column:94}}],line:46},"15":{loc:{start:{line:60,column:6},end:{line:60,column:100}},type:"if",locations:[{start:{line:60,column:6},end:{line:60,column:100}},{start:{line:60,column:6},end:{line:60,column:100}}],line:60},"16":{loc:{start:{line:60,column:13},end:{line:60,column:72}},type:"binary-expr",locations:[{start:{line:60,column:13},end:{line:60,column:39}},{start:{line:60,column:43},end:{line:60,column:72}}],line:60},"17":{loc:{start:{line:62,column:8},end:{line:62,column:30}},type:"if",locations:[{start:{line:62,column:8},end:{line:62,column:30}},{start:{line:62,column:8},end:{line:62,column:30}}],line:62},"18":{loc:{start:{line:63,column:8},end:{line:63,column:68}},type:"if",locations:[{start:{line:63,column:8},end:{line:63,column:68}},{start:{line:63,column:8},end:{line:63,column:68}}],line:63},"19":{loc:{start:{line:66,column:4},end:{line:99,column:5}},type:"if",locations:[{start:{line:66,column:4},end:{line:99,column:5}},{start:{line:66,column:4},end:{line:99,column:5}}],line:66},"20":{loc:{start:{line:66,column:8},end:{line:66,column:38}},type:"binary-expr",locations:[{start:{line:66,column:8},end:{line:66,column:21}},{start:{line:66,column:25},end:{line:66,column:38}}],line:66},"21":{loc:{start:{line:69,column:9},end:{line:99,column:5}},type:"if",locations:[{start:{line:69,column:9},end:{line:99,column:5}},{start:{line:69,column:9},end:{line:99,column:5}}],line:69},"22":{loc:{start:{line:69,column:13},end:{line:69,column:182}},type:"binary-expr",locations:[{start:{line:69,column:13},end:{line:69,column:29}},{start:{line:69,column:33},end:{line:69,column:48}},{start:{line:69,column:52},end:{line:69,column:68}},{start:{line:69,column:72},end:{line:69,column:87}},{start:{line:69,column:91},end:{line:69,column:107}},{start:{line:69,column:111},end:{line:69,column:126}},{start:{line:69,column:130},end:{line:69,column:146}},{start:{line:69,column:150},end:{line:69,column:164}},{start:{line:69,column:168},end:{line:69,column:182}}],line:69},"23":{loc:{start:{line:72,column:9},end:{line:99,column:5}},type:"if",locations:[{start:{line:72,column:9},end:{line:99,column:5}},{start:{line:72,column:9},end:{line:99,column:5}}],line:72},"24":{loc:{start:{line:75,column:9},end:{line:99,column:5}},type:"if",locations:[{start:{line:75,column:9},end:{line:99,column:5}},{start:{line:75,column:9},end:{line:99,column:5}}],line:75},"25":{loc:{start:{line:101,column:7},end:{line:130,column:3}},type:"if",locations:[{start:{line:101,column:7},end:{line:130,column:3}},{start:{line:101,column:7},end:{line:130,column:3}}],line:101},"26":{loc:{start:{line:106,column:4},end:{line:126,column:5}},type:"if",locations:[{start:{line:106,column:4},end:{line:126,column:5}},{start:{line:106,column:4},end:{line:126,column:5}}],line:106},"27":{loc:{start:{line:106,column:8},end:{line:106,column:65}},type:"binary-expr",locations:[{start:{line:106,column:8},end:{line:106,column:32}},{start:{line:106,column:36},end:{line:106,column:46}},{start:{line:106,column:50},end:{line:106,column:65}}],line:106},"28":{loc:{start:{line:109,column:9},end:{line:126,column:5}},type:"if",locations:[{start:{line:109,column:9},end:{line:126,column:5}},{start:{line:109,column:9},end:{line:126,column:5}}],line:109},"29":{loc:{start:{line:109,column:13},end:{line:109,column:53}},type:"binary-expr",locations:[{start:{line:109,column:13},end:{line:109,column:36}},{start:{line:109,column:40},end:{line:109,column:53}}],line:109},"30":{loc:{start:{line:113,column:6},end:{line:125,column:7}},type:"if",locations:[{start:{line:113,column:6},end:{line:125,column:7}},{start:{line:113,column:6},end:{line:125,column:7}}],line:113},"31":{loc:{start:{line:116,column:11},end:{line:125,column:7}},type:"if",locations:[{start:{line:116,column:11},end:{line:125,column:7}},{start:{line:116,column:11},end:{line:125,column:7}}],line:116},"32":{loc:{start:{line:134,column:2},end:{line:150,column:3}},type:"if",locations:[{start:{line:134,column:2},end:{line:150,column:3}},{start:{line:134,column:2},end:{line:150,column:3}}],line:134},"33":{loc:{start:{line:134,column:6},end:{line:134,column:85}},type:"binary-expr",locations:[{start:{line:134,column:6},end:{line:134,column:45}},{start:{line:134,column:49},end:{line:134,column:85}}],line:134},"34":{loc:{start:{line:147,column:6},end:{line:147,column:29}},type:"if",locations:[{start:{line:147,column:6},end:{line:147,column:29}},{start:{line:147,column:6},end:{line:147,column:29}}],line:147},"35":{loc:{start:{line:169,column:4},end:{line:172,column:5}},type:"if",locations:[{start:{line:169,column:4},end:{line:172,column:5}},{start:{line:169,column:4},end:{line:172,column:5}}],line:169},"36":{loc:{start:{line:177,column:4},end:{line:181,column:5}},type:"if",locations:[{start:{line:177,column:4},end:{line:181,column:5}},{start:{line:177,column:4},end:{line:181,column:5}}],line:177},"37":{loc:{start:{line:187,column:12},end:{line:187,column:36}},type:"binary-expr",locations:[{start:{line:187,column:12},end:{line:187,column:28}},{start:{line:187,column:32},end:{line:187,column:36}}],line:187},"38":{loc:{start:{line:193,column:4},end:{line:193,column:27}},type:"if",locations:[{start:{line:193,column:4},end:{line:193,column:27}},{start:{line:193,column:4},end:{line:193,column:27}}],line:193},"39":{loc:{start:{line:224,column:6},end:{line:224,column:54}},type:"if",locations:[{start:{line:224,column:6},end:{line:224,column:54}},{start:{line:224,column:6},end:{line:224,column:54}}],line:224},"40":{loc:{start:{line:245,column:4},end:{line:258,column:5}},type:"if",locations:[{start:{line:245,column:4},end:{line:258,column:5}},{start:{line:245,column:4},end:{line:258,column:5}}],line:245},"41":{loc:{start:{line:248,column:8},end:{line:253,column:9}},type:"if",locations:[{start:{line:248,column:8},end:{line:253,column:9}},{start:{line:248,column:8},end:{line:253,column:9}}],line:248},"42":{loc:{start:{line:262,column:4},end:{line:265,column:5}},type:"if",locations:[{start:{line:262,column:4},end:{line:265,column:5}},{start:{line:262,column:4},end:{line:265,column:5}}],line:262},"43":{loc:{start:{line:262,column:8},end:{line:262,column:148}},type:"binary-expr",locations:[{start:{line:262,column:8},end:{line:262,column:29}},{start:{line:262,column:33},end:{line:262,column:91}},{start:{line:262,column:95},end:{line:262,column:148}}],line:262},"44":{loc:{start:{line:275,column:44},end:{line:275,column:102}},type:"cond-expr",locations:[{start:{line:275,column:69},end:{line:275,column:83}},{start:{line:275,column:86},end:{line:275,column:102}}],line:275},"45":{loc:{start:{line:276,column:4},end:{line:289,column:5}},type:"if",locations:[{start:{line:276,column:4},end:{line:289,column:5}},{start:{line:276,column:4},end:{line:289,column:5}}],line:276},"46":{loc:{start:{line:279,column:8},end:{line:284,column:9}},type:"if",locations:[{start:{line:279,column:8},end:{line:284,column:9}},{start:{line:279,column:8},end:{line:284,column:9}}],line:279},"47":{loc:{start:{line:296,column:4},end:{line:302,column:5}},type:"if",locations:[{start:{line:296,column:4},end:{line:302,column:5}},{start:{line:296,column:4},end:{line:302,column:5}}],line:296},"48":{loc:{start:{line:298,column:6},end:{line:301,column:7}},type:"if",locations:[{start:{line:298,column:6},end:{line:301,column:7}},{start:{line:298,column:6},end:{line:301,column:7}}],line:298},"49":{loc:{start:{line:305,column:4},end:{line:308,column:5}},type:"if",locations:[{start:{line:305,column:4},end:{line:308,column:5}},{start:{line:305,column:4},end:{line:308,column:5}}],line:305},"50":{loc:{start:{line:305,column:8},end:{line:305,column:138}},type:"binary-expr",locations:[{start:{line:305,column:8},end:{line:305,column:47}},{start:{line:305,column:51},end:{line:305,column:138}}],line:305},"51":{loc:{start:{line:312,column:4},end:{line:316,column:5}},type:"if",locations:[{start:{line:312,column:4},end:{line:316,column:5}},{start:{line:312,column:4},end:{line:316,column:5}}],line:312},"52":{loc:{start:{line:362,column:2},end:{line:362,column:55}},type:"if",locations:[{start:{line:362,column:2},end:{line:362,column:55}},{start:{line:362,column:2},end:{line:362,column:55}}],line:362},"53":{loc:{start:{line:363,column:2},end:{line:363,column:55}},type:"if",locations:[{start:{line:363,column:2},end:{line:363,column:55}},{start:{line:363,column:2},end:{line:363,column:55}}],line:363},"54":{loc:{start:{line:364,column:2},end:{line:364,column:82}},type:"if",locations:[{start:{line:364,column:2},end:{line:364,column:82}},{start:{line:364,column:2},end:{line:364,column:82}}],line:364},"55":{loc:{start:{line:365,column:2},end:{line:365,column:82}},type:"if",locations:[{start:{line:365,column:2},end:{line:365,column:82}},{start:{line:365,column:2},end:{line:365,column:82}}],line:365},"56":{loc:{start:{line:366,column:2},end:{line:366,column:82}},type:"if",locations:[{start:{line:366,column:2},end:{line:366,column:82}},{start:{line:366,column:2},end:{line:366,column:82}}],line:366},"57":{loc:{start:{line:367,column:2},end:{line:367,column:82}},type:"if",locations:[{start:{line:367,column:2},end:{line:367,column:82}},{start:{line:367,column:2},end:{line:367,column:82}}],line:367},"58":{loc:{start:{line:376,column:2},end:{line:376,column:38}},type:"if",locations:[{start:{line:376,column:2},end:{line:376,column:38}},{start:{line:376,column:2},end:{line:376,column:38}}],line:376},"59":{loc:{start:{line:378,column:4},end:{line:380,column:20}},type:"if",locations:[{start:{line:378,column:4},end:{line:380,column:20}},{start:{line:378,column:4},end:{line:380,column:20}}],line:378},"60":{loc:{start:{line:378,column:8},end:{line:379,column:34}},type:"binary-expr",locations:[{start:{line:378,column:8},end:{line:378,column:35}},{start:{line:379,column:7},end:{line:379,column:34}}],line:378},"61":{loc:{start:{line:393,column:7},end:{line:398,column:8}},type:"if",locations:[{start:{line:393,column:7},end:{line:398,column:8}},{start:{line:393,column:7},end:{line:398,column:8}}],line:393},"62":{loc:{start:{line:393,column:11},end:{line:393,column:94}},type:"binary-expr",locations:[{start:{line:393,column:12},end:{line:393,column:18}},{start:{line:393,column:22},end:{line:393,column:28}},{start:{line:393,column:33},end:{line:393,column:53}},{start:{line:393,column:57},end:{line:393,column:94}}],line:393},"63":{loc:{start:{line:394,column:9},end:{line:396,column:56}},type:"if",locations:[{start:{line:394,column:9},end:{line:396,column:56}},{start:{line:394,column:9},end:{line:396,column:56}}],line:394},"64":{loc:{start:{line:394,column:12},end:{line:395,column:63}},type:"binary-expr",locations:[{start:{line:394,column:12},end:{line:394,column:78}},{start:{line:395,column:15},end:{line:395,column:63}}],line:394},"65":{loc:{start:{line:397,column:9},end:{line:397,column:72}},type:"if",locations:[{start:{line:397,column:9},end:{line:397,column:72}},{start:{line:397,column:9},end:{line:397,column:72}}],line:397},"66":{loc:{start:{line:397,column:13},end:{line:397,column:43}},type:"binary-expr",locations:[{start:{line:397,column:13},end:{line:397,column:26}},{start:{line:397,column:30},end:{line:397,column:43}}],line:397},"67":{loc:{start:{line:402,column:2},end:{line:406,column:20}},type:"if",locations:[{start:{line:402,column:2},end:{line:406,column:20}},{start:{line:402,column:2},end:{line:406,column:20}}],line:402},"68":{loc:{start:{line:403,column:69},end:{line:403,column:96}},type:"cond-expr",locations:[{start:{line:403,column:91},end:{line:403,column:92}},{start:{line:403,column:95},end:{line:403,column:96}}],line:403},"69":{loc:{start:{line:412,column:2},end:{line:412,column:35}},type:"if",locations:[{start:{line:412,column:2},end:{line:412,column:35}},{start:{line:412,column:2},end:{line:412,column:35}}],line:412},"70":{loc:{start:{line:424,column:13},end:{line:424,column:102}},type:"binary-expr",locations:[{start:{line:424,column:13},end:{line:424,column:48}},{start:{line:424,column:52},end:{line:424,column:102}}],line:424},"71":{loc:{start:{line:430,column:8},end:{line:430,column:64}},type:"if",locations:[{start:{line:430,column:8},end:{line:430,column:64}},{start:{line:430,column:8},end:{line:430,column:64}}],line:430},"72":{loc:{start:{line:431,column:8},end:{line:431,column:77}},type:"if",locations:[{start:{line:431,column:8},end:{line:431,column:77}},{start:{line:431,column:8},end:{line:431,column:77}}],line:431},"73":{loc:{start:{line:433,column:6},end:{line:446,column:7}},type:"if",locations:[{start:{line:433,column:6},end:{line:446,column:7}},{start:{line:433,column:6},end:{line:446,column:7}}],line:433},"74":{loc:{start:{line:436,column:8},end:{line:436,column:60}},type:"if",locations:[{start:{line:436,column:8},end:{line:436,column:60}},{start:{line:436,column:8},end:{line:436,column:60}}],line:436},"75":{loc:{start:{line:437,column:8},end:{line:445,column:9}},type:"if",locations:[{start:{line:437,column:8},end:{line:445,column:9}},{start:{line:437,column:8},end:{line:445,column:9}}],line:437},"76":{loc:{start:{line:437,column:12},end:{line:437,column:100}},type:"binary-expr",locations:[{start:{line:437,column:12},end:{line:437,column:45}},{start:{line:437,column:49},end:{line:437,column:100}}],line:437},"77":{loc:{start:{line:438,column:10},end:{line:440,column:68}},type:"if",locations:[{start:{line:438,column:10},end:{line:440,column:68}},{start:{line:438,column:10},end:{line:440,column:68}}],line:438},"78":{loc:{start:{line:438,column:13},end:{line:439,column:92}},type:"binary-expr",locations:[{start:{line:438,column:13},end:{line:438,column:91}},{start:{line:439,column:15},end:{line:439,column:92}}],line:438},"79":{loc:{start:{line:441,column:10},end:{line:444,column:52}},type:"if",locations:[{start:{line:441,column:10},end:{line:444,column:52}},{start:{line:441,column:10},end:{line:444,column:52}}],line:441},"80":{loc:{start:{line:441,column:14},end:{line:441,column:56}},type:"binary-expr",locations:[{start:{line:441,column:14},end:{line:441,column:33}},{start:{line:441,column:37},end:{line:441,column:56}}],line:441},"81":{loc:{start:{line:449,column:10},end:{line:450,column:83}},type:"binary-expr",locations:[{start:{line:449,column:10},end:{line:449,column:67}},{start:{line:450,column:10},end:{line:450,column:83}}],line:449},"82":{loc:{start:{line:456,column:12},end:{line:456,column:37}},type:"cond-expr",locations:[{start:{line:456,column:22},end:{line:456,column:27}},{start:{line:456,column:30},end:{line:456,column:37}}],line:456},"83":{loc:{start:{line:460,column:4},end:{line:460,column:68}},type:"if",locations:[{start:{line:460,column:4},end:{line:460,column:68}},{start:{line:460,column:4},end:{line:460,column:68}}],line:460},"84":{loc:{start:{line:463,column:4},end:{line:464,column:66}},type:"if",locations:[{start:{line:463,column:4},end:{line:464,column:66}},{start:{line:463,column:4},end:{line:464,column:66}}],line:463},"85":{loc:{start:{line:471,column:10},end:{line:471,column:70}},type:"binary-expr",locations:[{start:{line:471,column:10},end:{line:471,column:22}},{start:{line:471,column:26},end:{line:471,column:38}},{start:{line:471,column:42},end:{line:471,column:54}},{start:{line:471,column:58},end:{line:471,column:70}}],line:471},"86":{loc:{start:{line:478,column:4},end:{line:480,column:5}},type:"if",locations:[{start:{line:478,column:4},end:{line:480,column:5}},{start:{line:478,column:4},end:{line:480,column:5}}],line:478},"87":{loc:{start:{line:478,column:8},end:{line:478,column:60}},type:"binary-expr",locations:[{start:{line:478,column:8},end:{line:478,column:31}},{start:{line:478,column:35},end:{line:478,column:60}}],line:478},"88":{loc:{start:{line:509,column:2},end:{line:509,column:70}},type:"if",locations:[{start:{line:509,column:2},end:{line:509,column:70}},{start:{line:509,column:2},end:{line:509,column:70}}],line:509},"89":{loc:{start:{line:510,column:2},end:{line:510,column:40}},type:"if",locations:[{start:{line:510,column:2},end:{line:510,column:40}},{start:{line:510,column:2},end:{line:510,column:40}}],line:510},"90":{loc:{start:{line:519,column:6},end:{line:544,column:7}},type:"if",locations:[{start:{line:519,column:6},end:{line:544,column:7}},{start:{line:519,column:6},end:{line:544,column:7}}],line:519},"91":{loc:{start:{line:525,column:16},end:{line:525,column:110}},type:"cond-expr",locations:[{start:{line:525,column:49},end:{line:525,column:77}},{start:{line:525,column:80},end:{line:525,column:110}}],line:525},"92":{loc:{start:{line:527,column:24},end:{line:527,column:62}},type:"cond-expr",locations:[{start:{line:527,column:57},end:{line:527,column:58}},{start:{line:527,column:60},end:{line:527,column:62}}],line:527},"93":{loc:{start:{line:528,column:24},end:{line:528,column:102}},type:"cond-expr",locations:[{start:{line:528,column:58},end:{line:528,column:97}},{start:{line:528,column:101},end:{line:528,column:102}}],line:528},"94":{loc:{start:{line:528,column:58},end:{line:528,column:97}},type:"cond-expr",locations:[{start:{line:528,column:91},end:{line:528,column:92}},{start:{line:528,column:95},end:{line:528,column:97}}],line:528},"95":{loc:{start:{line:539,column:10},end:{line:542,column:11}},type:"if",locations:[{start:{line:539,column:10},end:{line:542,column:11}},{start:{line:539,column:10},end:{line:542,column:11}}],line:539},"96":{loc:{start:{line:559,column:2},end:{line:569,column:3}},type:"if",locations:[{start:{line:559,column:2},end:{line:569,column:3}},{start:{line:559,column:2},end:{line:569,column:3}}],line:559},"97":{loc:{start:{line:565,column:6},end:{line:566,column:60}},type:"if",locations:[{start:{line:565,column:6},end:{line:566,column:60}},{start:{line:565,column:6},end:{line:566,column:60}}],line:565},"98":{loc:{start:{line:577,column:2},end:{line:580,column:3}},type:"if",locations:[{start:{line:577,column:2},end:{line:580,column:3}},{start:{line:577,column:2},end:{line:580,column:3}}],line:577},"99":{loc:{start:{line:577,column:6},end:{line:577,column:77}},type:"binary-expr",locations:[{start:{line:577,column:6},end:{line:577,column:45}},{start:{line:577,column:49},end:{line:577,column:77}}],line:577},"100":{loc:{start:{line:590,column:2},end:{line:643,column:3}},type:"if",locations:[{start:{line:590,column:2},end:{line:643,column:3}},{start:{line:590,column:2},end:{line:643,column:3}}],line:590},"101":{loc:{start:{line:591,column:4},end:{line:595,column:5}},type:"if",locations:[{start:{line:591,column:4},end:{line:595,column:5}},{start:{line:591,column:4},end:{line:595,column:5}}],line:591},"102":{loc:{start:{line:592,column:6},end:{line:593,column:110}},type:"if",locations:[{start:{line:592,column:6},end:{line:593,column:110}},{start:{line:592,column:6},end:{line:593,column:110}}],line:592},"103":{loc:{start:{line:603,column:4},end:{line:608,column:5}},type:"if",locations:[{start:{line:603,column:4},end:{line:608,column:5}},{start:{line:603,column:4},end:{line:608,column:5}}],line:603},"104":{loc:{start:{line:603,column:8},end:{line:603,column:52}},type:"binary-expr",locations:[{start:{line:603,column:8},end:{line:603,column:28}},{start:{line:603,column:32},end:{line:603,column:52}}],line:603},"105":{loc:{start:{line:609,column:4},end:{line:612,column:5}},type:"if",locations:[{start:{line:609,column:4},end:{line:612,column:5}},{start:{line:609,column:4},end:{line:612,column:5}}],line:609},"106":{loc:{start:{line:613,column:4},end:{line:616,column:5}},type:"if",locations:[{start:{line:613,column:4},end:{line:616,column:5}},{start:{line:613,column:4},end:{line:616,column:5}}],line:613},"107":{loc:{start:{line:617,column:4},end:{line:620,column:5}},type:"if",locations:[{start:{line:617,column:4},end:{line:620,column:5}},{start:{line:617,column:4},end:{line:620,column:5}}],line:617},"108":{loc:{start:{line:621,column:4},end:{line:624,column:5}},type:"if",locations:[{start:{line:621,column:4},end:{line:624,column:5}},{start:{line:621,column:4},end:{line:624,column:5}}],line:621},"109":{loc:{start:{line:630,column:4},end:{line:638,column:5}},type:"if",locations:[{start:{line:630,column:4},end:{line:638,column:5}},{start:{line:630,column:4},end:{line:638,column:5}}],line:630},"110":{loc:{start:{line:634,column:8},end:{line:635,column:62}},type:"if",locations:[{start:{line:634,column:8},end:{line:635,column:62}},{start:{line:634,column:8},end:{line:635,column:62}}],line:634},"111":{loc:{start:{line:647,column:2},end:{line:647,column:46}},type:"if",locations:[{start:{line:647,column:2},end:{line:647,column:46}},{start:{line:647,column:2},end:{line:647,column:46}}],line:647},"112":{loc:{start:{line:648,column:2},end:{line:649,column:79}},type:"if",locations:[{start:{line:648,column:2},end:{line:649,column:79}},{start:{line:648,column:2},end:{line:649,column:79}}],line:648},"113":{loc:{start:{line:649,column:4},end:{line:649,column:79}},type:"if",locations:[{start:{line:649,column:4},end:{line:649,column:79}},{start:{line:649,column:4},end:{line:649,column:79}}],line:649},"114":{loc:{start:{line:651,column:2},end:{line:653,column:3}},type:"if",locations:[{start:{line:651,column:2},end:{line:653,column:3}},{start:{line:651,column:2},end:{line:653,column:3}}],line:651},"115":{loc:{start:{line:663,column:2},end:{line:665,column:3}},type:"if",locations:[{start:{line:663,column:2},end:{line:665,column:3}},{start:{line:663,column:2},end:{line:665,column:3}}],line:663},"116":{loc:{start:{line:669,column:2},end:{line:669,column:47}},type:"if",locations:[{start:{line:669,column:2},end:{line:669,column:47}},{start:{line:669,column:2},end:{line:669,column:47}}],line:669}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0,"226":0,"227":0,"228":0,"229":0,"230":0,"231":0,"232":0,"233":0,"234":0,"235":0,"236":0,"237":0,"238":0,"239":0,"240":0,"241":0,"242":0,"243":0,"244":0,"245":0,"246":0,"247":0,"248":0,"249":0,"250":0,"251":0,"252":0,"253":0,"254":0,"255":0,"256":0,"257":0,"258":0,"259":0,"260":0,"261":0,"262":0,"263":0,"264":0,"265":0,"266":0,"267":0,"268":0,"269":0,"270":0,"271":0,"272":0,"273":0,"274":0,"275":0,"276":0,"277":0,"278":0,"279":0,"280":0,"281":0,"282":0,"283":0,"284":0,"285":0,"286":0,"287":0,"288":0,"289":0,"290":0,"291":0,"292":0,"293":0,"294":0,"295":0,"296":0,"297":0,"298":0,"299":0,"300":0,"301":0,"302":0,"303":0,"304":0,"305":0,"306":0,"307":0,"308":0,"309":0,"310":0,"311":0,"312":0,"313":0,"314":0,"315":0,"316":0,"317":0,"318":0,"319":0,"320":0,"321":0,"322":0,"323":0,"324":0,"325":0,"326":0,"327":0,"328":0,"329":0,"330":0,"331":0,"332":0,"333":0,"334":0,"335":0,"336":0,"337":0,"338":0,"339":0,"340":0,"341":0,"342":0,"343":0,"344":0,"345":0,"346":0,"347":0,"348":0,"349":0,"350":0,"351":0,"352":0,"353":0,"354":0,"355":0,"356":0,"357":0,"358":0,"359":0,"360":0,"361":0,"362":0,"363":0,"364":0,"365":0,"366":0,"367":0,"368":0,"369":0,"370":0,"371":0,"372":0,"373":0,"374":0,"375":0,"376":0,"377":0,"378":0,"379":0,"380":0,"381":0,"382":0,"383":0,"384":0,"385":0,"386":0,"387":0,"388":0,"389":0,"390":0,"391":0,"392":0,"393":0,"394":0,"395":0,"396":0,"397":0,"398":0,"399":0,"400":0,"401":0,"402":0,"403":0,"404":0,"405":0,"406":0,"407":0,"408":0,"409":0,"410":0,"411":0,"412":0,"413":0,"414":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0,0,0,0,0,0,0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0],"57":[0,0],"58":[0,0],"59":[0,0],"60":[0,0],"61":[0,0],"62":[0,0,0,0],"63":[0,0],"64":[0,0],"65":[0,0],"66":[0,0],"67":[0,0],"68":[0,0],"69":[0,0],"70":[0,0],"71":[0,0],"72":[0,0],"73":[0,0],"74":[0,0],"75":[0,0],"76":[0,0],"77":[0,0],"78":[0,0],"79":[0,0],"80":[0,0],"81":[0,0],"82":[0,0],"83":[0,0],"84":[0,0],"85":[0,0,0,0],"86":[0,0],"87":[0,0],"88":[0,0],"89":[0,0],"90":[0,0],"91":[0,0],"92":[0,0],"93":[0,0],"94":[0,0],"95":[0,0],"96":[0,0],"97":[0,0],"98":[0,0],"99":[0,0],"100":[0,0],"101":[0,0],"102":[0,0],"103":[0,0],"104":[0,0],"105":[0,0],"106":[0,0],"107":[0,0],"108":[0,0],"109":[0,0],"110":[0,0],"111":[0,0],"112":[0,0],"113":[0,0],"114":[0,0],"115":[0,0],"116":[0,0]},_coverageSchema:"d34fc3e6b8297bcde183f5492bcb8fcb36775295"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_1hyt7v392s.s[0]++;module.exports={init,restart,isMovingBackward,sameTraject,getPath,getJumps,hasWon,isOnGameBoard,contains,sendScore,makeBestMove,validateMove,play,move,escapeHtml};var Shared=(cov_1hyt7v392s.s[1]++,require('./shared.js'));// appel du fichier pour récupérer les méthodes partagées
var express=(cov_1hyt7v392s.s[2]++,require('express'));// requiert le framework express
var app=(cov_1hyt7v392s.s[3]++,express());// invoque une instance d'express
var http=(cov_1hyt7v392s.s[4]++,require('http'));// requiert le module http
var server=(cov_1hyt7v392s.s[5]++,http.Server(app));// crée le serveur
var io=(cov_1hyt7v392s.s[6]++,require('socket.io')(server));// invoque une instance de socket.io liée au serveur
var bodyParser=(cov_1hyt7v392s.s[7]++,require("body-parser"));// configure express pour utiliser body-parser comme intermédiaire
cov_1hyt7v392s.s[8]++;app.use(bodyParser.urlencoded({extended:false}));// on configure body-parser (voir site pug)
cov_1hyt7v392s.s[9]++;app.use(bodyParser.json());cov_1hyt7v392s.s[10]++;app.set('views','./views');// dossier pour les templates html
cov_1hyt7v392s.s[11]++;app.set('view engine','pug');// configuration du moteur d'affichage des templates
cov_1hyt7v392s.s[12]++;app.post('/game',function(request,response){cov_1hyt7v392s.f[0]++;cov_1hyt7v392s.s[13]++;// en cas re requête post sur la page de jeu
if((cov_1hyt7v392s.b[1][0]++,typeof request.body.inputNewGameForm!=='undefined')&&(cov_1hyt7v392s.b[1][1]++,typeof request.body.inputJoinGameForm!=='undefined')){cov_1hyt7v392s.b[0][0]++;cov_1hyt7v392s.s[14]++;// on redirige si aucune variable n'est transmise par formulaire
response.redirect('/');}else{cov_1hyt7v392s.b[0][1]++;cov_1hyt7v392s.s[15]++;if(typeof request.body.inputNewGameForm!=='undefined'){cov_1hyt7v392s.b[2][0]++;// sinon si c'est le foormulaire de création de partie qui est rempli on récupère les données du formulaire
var numColors=(cov_1hyt7v392s.s[16]++,escapeHtml(request.body.numColors));var numPlayers=(cov_1hyt7v392s.s[17]++,escapeHtml(request.body.numPlayers));var player1=(cov_1hyt7v392s.s[18]++,(cov_1hyt7v392s.b[4][0]++,typeof request.body.player1!=='undefined')&&(cov_1hyt7v392s.b[4][1]++,request.body.player1!=='')?(cov_1hyt7v392s.b[3][0]++,escapeHtml(request.body.player1)):(cov_1hyt7v392s.b[3][1]++,"Joueur 1"));var player2=(cov_1hyt7v392s.s[19]++,(cov_1hyt7v392s.b[6][0]++,typeof request.body.player2!=='undefined')&&(cov_1hyt7v392s.b[6][1]++,request.body.player2!=='')?(cov_1hyt7v392s.b[5][0]++,escapeHtml(request.body.player2)):(cov_1hyt7v392s.b[5][1]++,"Joueur 2"));var player3=(cov_1hyt7v392s.s[20]++,(cov_1hyt7v392s.b[8][0]++,typeof request.body.player3!=='undefined')&&(cov_1hyt7v392s.b[8][1]++,request.body.player3!=='')?(cov_1hyt7v392s.b[7][0]++,escapeHtml(request.body.player3)):(cov_1hyt7v392s.b[7][1]++,"Joueur 3"));var player4=(cov_1hyt7v392s.s[21]++,(cov_1hyt7v392s.b[10][0]++,typeof request.body.player4!=='undefined')&&(cov_1hyt7v392s.b[10][1]++,request.body.player4!=='')?(cov_1hyt7v392s.b[9][0]++,escapeHtml(request.body.player4)):(cov_1hyt7v392s.b[9][1]++,"Joueur 4"));var player5=(cov_1hyt7v392s.s[22]++,(cov_1hyt7v392s.b[12][0]++,typeof request.body.player5!=='undefined')&&(cov_1hyt7v392s.b[12][1]++,request.body.player5!=='')?(cov_1hyt7v392s.b[11][0]++,escapeHtml(request.body.player5)):(cov_1hyt7v392s.b[11][1]++,"Joueur 5"));var player6=(cov_1hyt7v392s.s[23]++,(cov_1hyt7v392s.b[14][0]++,typeof request.body.player6!=='undefined')&&(cov_1hyt7v392s.b[14][1]++,request.body.player6!=='')?(cov_1hyt7v392s.b[13][0]++,escapeHtml(request.body.player6)):(cov_1hyt7v392s.b[13][1]++,"Joueur 6"));var ordi1=(cov_1hyt7v392s.s[24]++,escapeHtml(request.body.ordi1));var ordi2=(cov_1hyt7v392s.s[25]++,escapeHtml(request.body.ordi2));var ordi3=(cov_1hyt7v392s.s[26]++,escapeHtml(request.body.ordi3));var ordi4=(cov_1hyt7v392s.s[27]++,escapeHtml(request.body.ordi4));var ordi5=(cov_1hyt7v392s.s[28]++,escapeHtml(request.body.ordi5));var ordi6=(cov_1hyt7v392s.s[29]++,escapeHtml(request.body.ordi6));// on effectue les tests sur les données du formulaire
var players=(cov_1hyt7v392s.s[30]++,[player1,player2,player3,player4,player5,player6]);var userRegex=(cov_1hyt7v392s.s[31]++,new RegExp("^[a-zA-Z0-9_-]{2,10}$"));var defaultRegex=(cov_1hyt7v392s.s[32]++,new RegExp("^Joueur [1-6]$"));var namesFormatCheck=(cov_1hyt7v392s.s[33]++,true);var namesDuplicatesCheck=(cov_1hyt7v392s.s[34]++,true);cov_1hyt7v392s.s[35]++;for(var i=0;i<players.length;i++){cov_1hyt7v392s.s[36]++;if(!((cov_1hyt7v392s.b[16][0]++,userRegex.test(players[i]))||(cov_1hyt7v392s.b[16][1]++,defaultRegex.test(players[i])))){cov_1hyt7v392s.b[15][0]++;cov_1hyt7v392s.s[37]++;namesFormatCheck=false;}else{cov_1hyt7v392s.b[15][1]++;}cov_1hyt7v392s.s[38]++;for(var j=0;j<players.length;j++){cov_1hyt7v392s.s[39]++;if(i===j){cov_1hyt7v392s.b[17][0]++;cov_1hyt7v392s.s[40]++;continue;}else{cov_1hyt7v392s.b[17][1]++;}cov_1hyt7v392s.s[41]++;if(players[i]===players[j]){cov_1hyt7v392s.b[18][0]++;cov_1hyt7v392s.s[42]++;namesDuplicatesCheck=false;}else{cov_1hyt7v392s.b[18][1]++;}}}cov_1hyt7v392s.s[43]++;if((cov_1hyt7v392s.b[20][0]++,numColors<1)||(cov_1hyt7v392s.b[20][1]++,numColors>3)){cov_1hyt7v392s.b[19][0]++;cov_1hyt7v392s.s[44]++;response.send("<p>Vous devez choisir entre une et trois couleurs</p>");}else{cov_1hyt7v392s.b[19][1]++;cov_1hyt7v392s.s[45]++;if((cov_1hyt7v392s.b[22][0]++,numPlayers===3)&&(cov_1hyt7v392s.b[22][1]++,numColors!==2)||(cov_1hyt7v392s.b[22][2]++,numPlayers===4)&&(cov_1hyt7v392s.b[22][3]++,numColors!==1)||(cov_1hyt7v392s.b[22][4]++,numPlayers===6)&&(cov_1hyt7v392s.b[22][5]++,numColors!==1)||(cov_1hyt7v392s.b[22][6]++,numPlayers===5)||(cov_1hyt7v392s.b[22][7]++,numPlayers<2)||(cov_1hyt7v392s.b[22][8]++,numPlayers>6)){cov_1hyt7v392s.b[21][0]++;cov_1hyt7v392s.s[46]++;response.send("<p>Ce mode de jeu n'est pas disponible</p>");}else{cov_1hyt7v392s.b[21][1]++;cov_1hyt7v392s.s[47]++;if(!namesFormatCheck){cov_1hyt7v392s.b[23][0]++;cov_1hyt7v392s.s[48]++;response.send("<p>Nom incorrect</p>");}else{cov_1hyt7v392s.b[23][1]++;cov_1hyt7v392s.s[49]++;if(!namesDuplicatesCheck){cov_1hyt7v392s.b[24][0]++;cov_1hyt7v392s.s[50]++;response.send("<p>Nom déjà pris</p>");}else{cov_1hyt7v392s.b[24][1]++;// on crée une salle unique avec Socket.IO
var gameId=(cov_1hyt7v392s.s[51]++,Math.random()*100000|0);cov_1hyt7v392s.s[52]++;response.render('game',{// on affiche le template avec les bonnes valeurs
numPlayers:numPlayers,numColors:numColors,player1:player1,player2:player2,player3:player3,player4:player4,player5:player5,player6:player6,ordi1:ordi1,ordi2:ordi2,ordi3:ordi3,ordi4:ordi4,ordi5:ordi5,ordi6:ordi6,role:"host",gameId:gameId});}}}}}else{cov_1hyt7v392s.b[2][1]++;cov_1hyt7v392s.s[53]++;if(typeof request.body.inputJoinGameForm!=='undefined'){cov_1hyt7v392s.b[25][0]++;// si le formulaire pour rejoindre une partie à été rempli on récupère les valeurs et on effectue les tests sur ces dernières
var gameId=(cov_1hyt7v392s.s[54]++,escapeHtml(request.body.roomID));var player=(cov_1hyt7v392s.s[55]++,escapeHtml(request.body.player));var gameIdRegex=(cov_1hyt7v392s.s[56]++,new RegExp("[0-9]{1-6}"));var nameRegex=(cov_1hyt7v392s.s[57]++,new RegExp("^[a-zA-Z0-9_-]{2,10}$"));cov_1hyt7v392s.s[58]++;if((cov_1hyt7v392s.b[27][0]++,gameIdRegex.test(gameId))||(cov_1hyt7v392s.b[27][1]++,gameId<0)||(cov_1hyt7v392s.b[27][2]++,gameId>100000)){cov_1hyt7v392s.b[26][0]++;cov_1hyt7v392s.s[59]++;response.send("<p>N° de partie incorrect</p>");}else{cov_1hyt7v392s.b[26][1]++;cov_1hyt7v392s.s[60]++;if((cov_1hyt7v392s.b[29][0]++,!nameRegex.test(player))&&(cov_1hyt7v392s.b[29][1]++,player!=='')){cov_1hyt7v392s.b[28][0]++;cov_1hyt7v392s.s[61]++;response.send("<p>Nom incorrect</p>");}else{cov_1hyt7v392s.b[28][1]++;cov_1hyt7v392s.s[62]++;if(!contains(Object.keys(games),gameId)){cov_1hyt7v392s.b[30][0]++;cov_1hyt7v392s.s[63]++;response.send("<p>Cette partie n'existe pas.</p>");}else{cov_1hyt7v392s.b[30][1]++;cov_1hyt7v392s.s[64]++;if(games[gameId]['remaining']===0){cov_1hyt7v392s.b[31][0]++;cov_1hyt7v392s.s[65]++;response.send("<p>Cette partie est déjà complète.</p>");}else{cov_1hyt7v392s.b[31][1]++;cov_1hyt7v392s.s[66]++;response.render('game',{role:"guest",gameId:gameId,player1:player});}}}}}else{cov_1hyt7v392s.b[25][1]++;cov_1hyt7v392s.s[67]++;response.send("<p>Vous devez remplir au moins un des deux formulaires</p>");}}}});cov_1hyt7v392s.s[68]++;app.get('/score',function(request,response){cov_1hyt7v392s.f[1]++;cov_1hyt7v392s.s[69]++;// en cas de requête get sur la page de scores
if((cov_1hyt7v392s.b[33][0]++,Object.keys(request.query).length===0)&&(cov_1hyt7v392s.b[33][1]++,request.query.constructor===Object)){cov_1hyt7v392s.b[32][0]++;cov_1hyt7v392s.s[70]++;// on redirige si aucune variable n'est transmise
response.redirect('/');}else{cov_1hyt7v392s.b[32][1]++;// sinon on récupère les valeurs
var name=(cov_1hyt7v392s.s[71]++,request.query.name);var score=(cov_1hyt7v392s.s[72]++,parseInt(request.query.score));var adversaire1=(cov_1hyt7v392s.s[73]++,request.query.adversaire1);var adversaire2=(cov_1hyt7v392s.s[74]++,request.query.adversaire2);var adversaire3=(cov_1hyt7v392s.s[75]++,request.query.adversaire3);var adversaire4=(cov_1hyt7v392s.s[76]++,request.query.adversaire4);var adversaire5=(cov_1hyt7v392s.s[77]++,request.query.adversaire5);var sql=(cov_1hyt7v392s.s[78]++,"INSERT INTO parties (nom, score, adversaire1, adversaire2, adversaire3, adversaire4, adversaire5, dategame) VALUES ('"+name+"', "+score+", '"+adversaire1+"', '"+adversaire2+"', '"+adversaire3+"', '"+adversaire4+"', '"+adversaire5+"', now())");cov_1hyt7v392s.s[79]++;connection.query(sql,function(error,rows,fields){cov_1hyt7v392s.f[2]++;cov_1hyt7v392s.s[80]++;// et on les met dans la base de données
if(error){cov_1hyt7v392s.b[34][0]++;cov_1hyt7v392s.s[81]++;throw error;}else{cov_1hyt7v392s.b[34][1]++;}});cov_1hyt7v392s.s[82]++;response.sendStatus(200);// on ferme la requête
}});var mysql=(cov_1hyt7v392s.s[83]++,require('mysql'));// on requiert le module mysql
var dbConfig=(cov_1hyt7v392s.s[84]++,{// on configure la base de données
host:'us-cdbr-iron-east-05.cleardb.net',user:'bb4e923f5faaa9',password:'382b4542',database:'heroku_703605cd7a769b9',dateStrings:'date'});var connection;// variable pour la connexion à la base de données
function handleDisconnect(){cov_1hyt7v392s.f[3]++;cov_1hyt7v392s.s[85]++;// fonction pour se reconnecter en cas de déconnexion - https://stackoverflow.com/questions/20210522/nodejs-mysql-error-connection-lost-the-server-closed-the-connection
connection=mysql.createConnection(dbConfig);// Recreate the connection, since
// the old one cannot be reused.
cov_1hyt7v392s.s[86]++;connection.connect(function(error){cov_1hyt7v392s.f[4]++;cov_1hyt7v392s.s[87]++;// The server is either down
if(error){cov_1hyt7v392s.b[35][0]++;cov_1hyt7v392s.s[88]++;// or restarting (takes a while sometimes).
console.log('error when connecting to db:',error);cov_1hyt7v392s.s[89]++;setTimeout(handleDisconnect,2000);// We introduce a delay before attempting to reconnect,
}else{cov_1hyt7v392s.b[35][1]++;}// to avoid a hot loop, and to allow our node script to
});// process asynchronous requests in the meantime.
// If you're also serving http, display a 503 error.
cov_1hyt7v392s.s[90]++;connection.on('error',function(error){cov_1hyt7v392s.f[5]++;cov_1hyt7v392s.s[91]++;console.log('db error',error);cov_1hyt7v392s.s[92]++;if(error.code==='PROTOCOL_CONNECTION_LOST'){cov_1hyt7v392s.b[36][0]++;cov_1hyt7v392s.s[93]++;// Connection to the MySQL server is usually
handleDisconnect();// lost due to either server restart, or a
}else{cov_1hyt7v392s.b[36][1]++;cov_1hyt7v392s.s[94]++;// connnection idle timeout (the wait_timeout
throw error;// server variable configures this)
}});}cov_1hyt7v392s.s[95]++;handleDisconnect();// on invoque la fonction de reconnexion
var PORT=(cov_1hyt7v392s.s[96]++,(cov_1hyt7v392s.b[37][0]++,process.env.PORT)||(cov_1hyt7v392s.b[37][1]++,8000));cov_1hyt7v392s.s[97]++;server.listen(PORT);cov_1hyt7v392s.s[98]++;app.get('/',function(request,response){cov_1hyt7v392s.f[6]++;cov_1hyt7v392s.s[99]++;connection.query('SELECT nom, score, dategame FROM parties ORDER BY score ASC LIMIT 0, 10',function(error,rows,fields){cov_1hyt7v392s.f[7]++;cov_1hyt7v392s.s[100]++;if(error){cov_1hyt7v392s.b[38][0]++;cov_1hyt7v392s.s[101]++;throw error;}else{cov_1hyt7v392s.b[38][1]++;}cov_1hyt7v392s.s[102]++;response.render('index',{score1:rows[0],score2:rows[1],score3:rows[2],score4:rows[3],score5:rows[4],score6:rows[5],score7:rows[6],score8:rows[7],score9:rows[8],score10:rows[9]});});});cov_1hyt7v392s.s[103]++;app.get('/game',function(request,response){cov_1hyt7v392s.f[8]++;cov_1hyt7v392s.s[104]++;response.redirect('/');});cov_1hyt7v392s.s[105]++;app.use(express.static(__dirname));var games=(cov_1hyt7v392s.s[106]++,{});var clients=(cov_1hyt7v392s.s[107]++,{});cov_1hyt7v392s.s[108]++;io.on('connection',function(socket){cov_1hyt7v392s.f[9]++;cov_1hyt7v392s.s[109]++;socket.on('create game',function(data){cov_1hyt7v392s.f[10]++;cov_1hyt7v392s.s[110]++;console.log("create game : ",data);var numHumanPlayers=(cov_1hyt7v392s.s[111]++,0);cov_1hyt7v392s.s[112]++;for(var i=0,max=data["isPlayedByIa"].length;i<max;i++){cov_1hyt7v392s.s[113]++;if(!data["isPlayedByIa"][i]){cov_1hyt7v392s.b[39][0]++;cov_1hyt7v392s.s[114]++;numHumanPlayers++;}else{cov_1hyt7v392s.b[39][1]++;}}cov_1hyt7v392s.s[115]++;games[data["gameId"]]={numPlayers:data["numPlayers"],numColors:data["numColors"],COLORS:data["COLORS"],player1:data["player"],PLAYERS:[],isPlayedByIa:data["isPlayedByIa"],numHumanPlayers:numHumanPlayers,remaining:numHumanPlayers-1,isIaPlaying:false,restartCount:0};// Join the Room and wait for the players
cov_1hyt7v392s.s[116]++;socket.join(data["gameId"].toString());cov_1hyt7v392s.s[117]++;clients[this.id]={gameId:data["gameId"],number:0,name:data["player"]};cov_1hyt7v392s.s[118]++;if(games[data["gameId"]]["PLAYERS"].length+1===games[data["gameId"]]["numHumanPlayers"]){cov_1hyt7v392s.b[40][0]++;// partie complète
var PLAYERS=(cov_1hyt7v392s.s[119]++,games[data["gameId"]]["PLAYERS"]);cov_1hyt7v392s.s[120]++;for(i=2;i<=games[data["gameId"]]["numPlayers"];i++){cov_1hyt7v392s.s[121]++;if(!games[data["gameId"]]["isPlayedByIa"][i-1]){// games[data["gameId"]]["player"+i] = (typeof(PLAYERS[0]) !== 'undefined' && PLAYERS[0] !== '')? PLAYERS.shift() : "Joueur " + i;
cov_1hyt7v392s.b[41][0]++;}else{cov_1hyt7v392s.b[41][1]++;cov_1hyt7v392s.s[122]++;// si joué par l'IA
games[data["gameId"]]["player"+i]="Ordinateur";}}cov_1hyt7v392s.s[123]++;delete games[data["gameId"]]["PLAYERS"];cov_1hyt7v392s.s[124]++;init(games,data["gameId"]);cov_1hyt7v392s.s[125]++;io.sockets.in(data["gameId"]).emit('game full',games[data["gameId"]]);}else{cov_1hyt7v392s.b[40][1]++;}});cov_1hyt7v392s.s[126]++;socket.on('join game',function(data){cov_1hyt7v392s.f[11]++;cov_1hyt7v392s.s[127]++;console.log('join game : ',data);cov_1hyt7v392s.s[128]++;if((cov_1hyt7v392s.b[43][0]++,data["player"]!=='')&&(cov_1hyt7v392s.b[43][1]++,contains(games[data["gameId"]]["PLAYERS"],data["player"]))||(cov_1hyt7v392s.b[43][2]++,data["player"]===games[data["gameId"]]["player1"])){cov_1hyt7v392s.b[42][0]++;cov_1hyt7v392s.s[129]++;socket.emit('name error',{name:data["player"]});cov_1hyt7v392s.s[130]++;return;}else{cov_1hyt7v392s.b[42][1]++;}cov_1hyt7v392s.s[131]++;socket.join(data["gameId"].toString());cov_1hyt7v392s.s[132]++;games[data["gameId"]]['remaining']-=1;cov_1hyt7v392s.s[133]++;games[data["gameId"]]["PLAYERS"].push(data["player"]);var n=(cov_1hyt7v392s.s[134]++,games[data["gameId"]]["PLAYERS"].length);cov_1hyt7v392s.s[135]++;clients[this.id]={gameId:data["gameId"],number:n,name:data["player"]};cov_1hyt7v392s.s[136]++;games[data["gameId"]]["player"+(n+1)]=data["player"]!==''?(cov_1hyt7v392s.b[44][0]++,data["player"]):(cov_1hyt7v392s.b[44][1]++,"Joueur"+(n+1));cov_1hyt7v392s.s[137]++;if(games[data["gameId"]]["PLAYERS"].length+1===games[data["gameId"]]["numHumanPlayers"]){cov_1hyt7v392s.b[45][0]++;var PLAYERS=(cov_1hyt7v392s.s[138]++,games[data["gameId"]]["PLAYERS"]);cov_1hyt7v392s.s[139]++;for(i=2;i<=games[data["gameId"]]["numPlayers"];i++){cov_1hyt7v392s.s[140]++;if(!games[data["gameId"]]["isPlayedByIa"][i-1]){// games[data["gameId"]]["player"+i] = (typeof(PLAYERS[0]) !== 'undefined' && PLAYERS[0] !== '')? PLAYERS.shift() : "Joueur " + i;
cov_1hyt7v392s.b[46][0]++;}else{cov_1hyt7v392s.b[46][1]++;cov_1hyt7v392s.s[141]++;games[data["gameId"]]["player"+i]="Ordinateur";}}cov_1hyt7v392s.s[142]++;delete games[data["gameId"]]["PLAYERS"];cov_1hyt7v392s.s[143]++;init(games,data["gameId"]);cov_1hyt7v392s.s[144]++;io.sockets.in(data["gameId"]).emit('game full',games[data["gameId"]]);}else{cov_1hyt7v392s.b[45][1]++;}});cov_1hyt7v392s.s[145]++;socket.on('move request',function(data){cov_1hyt7v392s.f[12]++;cov_1hyt7v392s.s[146]++;console.log('move request : ',data);cov_1hyt7v392s.s[147]++;play(io,clients,games,clients[this.id]["gameId"],this,data["cell"]);});cov_1hyt7v392s.s[148]++;socket.on('disconnecting',function(reason){cov_1hyt7v392s.f[13]++;cov_1hyt7v392s.s[149]++;if(contains(Object.keys(clients),this.id)){cov_1hyt7v392s.b[47][0]++;cov_1hyt7v392s.s[150]++;io.sockets.in(clients[this.id]["gameId"]).emit('player disconnecting',clients[this.id]);cov_1hyt7v392s.s[151]++;if(!games[clients[this.id]["gameId"]]["gameOver"]){cov_1hyt7v392s.b[48][0]++;cov_1hyt7v392s.s[152]++;games[clients[this.id]["gameId"]]["gameOver"]=true;cov_1hyt7v392s.s[153]++;io.sockets.in(clients[this.id]["gameId"]).emit('end game',{});}else{cov_1hyt7v392s.b[48][1]++;}}else{cov_1hyt7v392s.b[47][1]++;}});cov_1hyt7v392s.s[154]++;socket.on('disconnect',function(reason){cov_1hyt7v392s.f[14]++;cov_1hyt7v392s.s[155]++;if((cov_1hyt7v392s.b[50][0]++,contains(Object.keys(clients),this.id))&&(cov_1hyt7v392s.b[50][1]++,!contains(Object.keys(io.sockets.adapter.rooms),clients[this.id]["gameId"].toString()))){cov_1hyt7v392s.b[49][0]++;cov_1hyt7v392s.s[156]++;console.log('deleting game ',clients[this.id]["gameId"]);cov_1hyt7v392s.s[157]++;delete games[clients[this.id]["gameId"]];}else{cov_1hyt7v392s.b[49][1]++;}});cov_1hyt7v392s.s[158]++;socket.on('restart request',function(){cov_1hyt7v392s.f[15]++;cov_1hyt7v392s.s[159]++;games[clients[this.id]["gameId"]]["restartCount"]+=1;cov_1hyt7v392s.s[160]++;if(games[clients[this.id]["gameId"]]["restartCount"]===games[clients[this.id]["gameId"]]["numHumanPlayers"]){cov_1hyt7v392s.b[51][0]++;cov_1hyt7v392s.s[161]++;restart(games,clients[this.id]["gameId"],1);// à revoir, plus d'option 1 pour restart ?
cov_1hyt7v392s.s[162]++;console.log('restarting : ',clients[this.id]["gameId"]);cov_1hyt7v392s.s[163]++;io.sockets.in(clients[this.id]["gameId"]).emit('restart game',{});}else{cov_1hyt7v392s.b[51][1]++;}});});var TRIANGLES_COORDS=(cov_1hyt7v392s.s[164]++,[[[0,12],[1,11],[1,13],[2,10],[2,12],[2,14],[3,9],[3,11],[3,13],[3,15]],[[16,12],[15,11],[15,13],[14,10],[14,12],[14,14],[13,9],[13,11],[13,13],[13,15]],[[4,0],[4,2],[4,4],[4,6],[5,1],[5,3],[5,5],[6,2],[6,4],[7,3]],[[12,24],[12,22],[12,20],[12,18],[11,23],[11,21],[11,19],[10,22],[10,20],[9,21]],[[4,24],[4,22],[4,20],[4,18],[5,23],[5,21],[5,19],[6,22],[6,20],[7,21]],[[12,0],[12,2],[12,4],[12,6],[11,1],[11,3],[11,5],[10,2],[10,4],[9,3]]]);// fonction pour recommencer le jeu
function init(games,gameId){cov_1hyt7v392s.f[16]++;cov_1hyt7v392s.s[165]++;// games[gameId]["gameBoard"] = initGameBoard(); // déjà dans restart
games[gameId]["PLAYERS"]=[];cov_1hyt7v392s.s[166]++;for(var n=1;n<=games[gameId]["numPlayers"];n++){cov_1hyt7v392s.s[167]++;games[gameId]["PLAYERS"].push({name:games[gameId]["player"+n],score:0,colors:games[gameId]["COLORS"][n-1],number:n});}cov_1hyt7v392s.s[168]++;games[gameId]["Time"]=500;cov_1hyt7v392s.s[169]++;restart(games,gameId);}function restart(games,gameId){cov_1hyt7v392s.f[17]++;cov_1hyt7v392s.s[170]++;games[gameId]["gameBoard"]=Shared.initGameBoard();cov_1hyt7v392s.s[171]++;for(var n=0;n<games[gameId]["numPlayers"];n++){cov_1hyt7v392s.s[172]++;games[gameId]["PLAYERS"][n].score=0;}cov_1hyt7v392s.s[173]++;games[gameId]["player"]=0;cov_1hyt7v392s.s[174]++;games[gameId]["startCell"]=0;cov_1hyt7v392s.s[175]++;games[gameId]["gameOver"]=false;cov_1hyt7v392s.s[176]++;games[gameId]["gameState"]=Shared.initArray(games[gameId]["numPlayers"],games[gameId]["numColors"],false);cov_1hyt7v392s.s[177]++;games[gameId]["history"]=Shared.initArray(games[gameId]["numPlayers"],0,false);cov_1hyt7v392s.s[178]++;games[gameId]["restartCount"]=0;}function isMovingBackward(color,startCell,endCell){cov_1hyt7v392s.f[18]++;cov_1hyt7v392s.s[179]++;// remplacer par switch ?
if(color===1){cov_1hyt7v392s.b[52][0]++;cov_1hyt7v392s.s[180]++;return endCell[0]-startCell[0]<0;}else{cov_1hyt7v392s.b[52][1]++;}cov_1hyt7v392s.s[181]++;if(color===2){cov_1hyt7v392s.b[53][0]++;cov_1hyt7v392s.s[182]++;return endCell[0]-startCell[0]>0;}else{cov_1hyt7v392s.b[53][1]++;}cov_1hyt7v392s.s[183]++;if(color===3){cov_1hyt7v392s.b[54][0]++;cov_1hyt7v392s.s[184]++;return endCell[1]+endCell[0]-startCell[1]-startCell[0]<0;}else{cov_1hyt7v392s.b[54][1]++;}cov_1hyt7v392s.s[185]++;if(color===4){cov_1hyt7v392s.b[55][0]++;cov_1hyt7v392s.s[186]++;return endCell[1]+endCell[0]-startCell[1]-startCell[0]>0;}else{cov_1hyt7v392s.b[55][1]++;}cov_1hyt7v392s.s[187]++;if(color===5){cov_1hyt7v392s.b[56][0]++;cov_1hyt7v392s.s[188]++;return endCell[1]-endCell[0]-startCell[1]+startCell[0]>0;}else{cov_1hyt7v392s.b[56][1]++;}cov_1hyt7v392s.s[189]++;if(color===6){cov_1hyt7v392s.b[57][0]++;cov_1hyt7v392s.s[190]++;return endCell[1]-endCell[0]-startCell[1]+startCell[0]<0;}else{cov_1hyt7v392s.b[57][1]++;}}function sameTraject(games,gameId,path){cov_1hyt7v392s.f[19]++;// utile ? myArray.reverse()
var i,j;cov_1hyt7v392s.s[191]++;i=path.length;cov_1hyt7v392s.s[192]++;j=i-1;cov_1hyt7v392s.s[193]++;last=games[gameId]["history"][games[gameId]["player"]];cov_1hyt7v392s.s[194]++;if(i!==last.length){cov_1hyt7v392s.b[58][0]++;cov_1hyt7v392s.s[195]++;return false;}else{cov_1hyt7v392s.b[58][1]++;}cov_1hyt7v392s.s[196]++;while(i--){cov_1hyt7v392s.s[197]++;if((cov_1hyt7v392s.b[60][0]++,path[j-i][0]!==last[i][0])||(cov_1hyt7v392s.b[60][1]++,path[j-i][1]!==last[i][1])){cov_1hyt7v392s.b[59][0]++;cov_1hyt7v392s.s[198]++;return false;}else{cov_1hyt7v392s.b[59][1]++;}}cov_1hyt7v392s.s[199]++;return true;}function getPath(games,gameId,startCell,endCell){cov_1hyt7v392s.f[20]++;cov_1hyt7v392s.s[200]++;games[gameId]["reachableCells"]=[];// init reachableCells
cov_1hyt7v392s.s[201]++;games[gameId]["path"]=[];// init list of path to get shortest one
var row=(cov_1hyt7v392s.s[202]++,startCell[0]);var col=(cov_1hyt7v392s.s[203]++,startCell[1]);var i,j;cov_1hyt7v392s.s[204]++;for(i=row-1;i<=row+1;i++){cov_1hyt7v392s.s[205]++;// add mouvement adjaçant
for(j=col-2;j<=col+2;j++){cov_1hyt7v392s.s[206]++;if(((cov_1hyt7v392s.b[62][0]++,i!=row)||(cov_1hyt7v392s.b[62][1]++,j!=col))&&(cov_1hyt7v392s.b[62][2]++,isOnGameBoard([i,j]))&&(cov_1hyt7v392s.b[62][3]++,games[gameId]["gameBoard"][i][j]==-1)){cov_1hyt7v392s.b[61][0]++;cov_1hyt7v392s.s[207]++;if((cov_1hyt7v392s.b[64][0]++,!isMovingBackward(games[gameId]["playedColor"],[row,col],[i,j]))&&(cov_1hyt7v392s.b[64][1]++,!sameTraject(games,gameId,[startCell,[i,j]]))){cov_1hyt7v392s.b[63][0]++;cov_1hyt7v392s.s[208]++;games[gameId]["reachableCells"].push([i,j]);}else{cov_1hyt7v392s.b[63][1]++;}// used by IA
cov_1hyt7v392s.s[209]++;if((cov_1hyt7v392s.b[66][0]++,i==endCell[0])&&(cov_1hyt7v392s.b[66][1]++,j==endCell[1])){cov_1hyt7v392s.b[65][0]++;cov_1hyt7v392s.s[210]++;return[startCell,[i,j]];}else{cov_1hyt7v392s.b[65][1]++;}}else{cov_1hyt7v392s.b[61][1]++;}}}cov_1hyt7v392s.s[211]++;getJumps(games,gameId,[startCell],endCell,[]);cov_1hyt7v392s.s[212]++;if(games[gameId]["path"].length>0){cov_1hyt7v392s.b[67][0]++;var path=(cov_1hyt7v392s.s[213]++,games[gameId]["path"].reduce(function(a,b){cov_1hyt7v392s.f[21]++;cov_1hyt7v392s.s[214]++;return a.length<b.length?(cov_1hyt7v392s.b[68][0]++,a):(cov_1hyt7v392s.b[68][1]++,b);}));cov_1hyt7v392s.s[215]++;return path;}else{cov_1hyt7v392s.b[67][1]++;cov_1hyt7v392s.s[216]++;return false;}}function getJumps(games,gameId,cells,endCell,oldPath){cov_1hyt7v392s.f[22]++;cov_1hyt7v392s.s[217]++;if(cells.length<1){cov_1hyt7v392s.b[69][0]++;cov_1hyt7v392s.s[218]++;return false;}else{cov_1hyt7v392s.b[69][1]++;}var i,j,k;var pivotRow,pivotCol;var n,index;var access_cell=(cov_1hyt7v392s.s[219]++,[]);var row=(cov_1hyt7v392s.s[220]++,cells[0][0]);var col=(cov_1hyt7v392s.s[221]++,cells[0][1]);// chercher saut sur ligne + diagonal 6 directions :
cov_1hyt7v392s.s[222]++;for(i=-1;i<2;i++){cov_1hyt7v392s.s[223]++;// i in [-1, 0, 1]
for(j=-1;j<2;j+=2){cov_1hyt7v392s.s[224]++;// j in [-1, 1]
pivotRow=row+i;cov_1hyt7v392s.s[225]++;pivotCol=col+j;cov_1hyt7v392s.s[226]++;while((cov_1hyt7v392s.b[70][0]++,isOnGameBoard([pivotRow,pivotCol]))&&(cov_1hyt7v392s.b[70][1]++,games[gameId]["gameBoard"][pivotRow][pivotCol]<1)){cov_1hyt7v392s.s[227]++;// avancer jusqu'a case occupée
pivotRow+=i;cov_1hyt7v392s.s[228]++;pivotCol+=j;}cov_1hyt7v392s.s[229]++;n=0;cov_1hyt7v392s.s[230]++;for(k=1;k<j*(pivotCol-col);k+=1){cov_1hyt7v392s.s[231]++;if(!isOnGameBoard([pivotRow+i*k,pivotCol+j*k])){cov_1hyt7v392s.b[71][0]++;cov_1hyt7v392s.s[232]++;break;}else{cov_1hyt7v392s.b[71][1]++;}cov_1hyt7v392s.s[233]++;if(games[gameId]["gameBoard"][pivotRow+i*k][pivotCol+j*k]>0){cov_1hyt7v392s.b[72][0]++;cov_1hyt7v392s.s[234]++;n+=1;}else{cov_1hyt7v392s.b[72][1]++;}// si un autre pion sur le chemin break
}cov_1hyt7v392s.s[235]++;if(n===0){cov_1hyt7v392s.b[73][0]++;cov_1hyt7v392s.s[236]++;index_r=2*pivotRow-row;//(quand i=0; , pivotRow=row ; 2*row-row=row (on reste sur la même la ligne)
cov_1hyt7v392s.s[237]++;index_c=2*pivotCol-col;cov_1hyt7v392s.s[238]++;if(contains(oldPath,[index_r,index_c])){cov_1hyt7v392s.b[74][0]++;cov_1hyt7v392s.s[239]++;continue;}else{cov_1hyt7v392s.b[74][1]++;}// éviter de tourner rond
cov_1hyt7v392s.s[240]++;if((cov_1hyt7v392s.b[76][0]++,isOnGameBoard([index_r,index_c]))&&(cov_1hyt7v392s.b[76][1]++,games[gameId]["gameBoard"][index_r][index_c]===-1)){cov_1hyt7v392s.b[75][0]++;cov_1hyt7v392s.s[241]++;// si la case en asymétrie est vide valide:
if((cov_1hyt7v392s.b[78][0]++,!isMovingBackward(games[gameId]["playedColor"],[row,col],[index_r,index_c]))&&(cov_1hyt7v392s.b[78][1]++,!sameTraject(games,gameId,oldPath.concat([[row,col],[index_r,index_c]])))){cov_1hyt7v392s.b[77][0]++;cov_1hyt7v392s.s[242]++;games[gameId]["reachableCells"].push([index_r,index_c]);}else{cov_1hyt7v392s.b[77][1]++;}cov_1hyt7v392s.s[243]++;if((cov_1hyt7v392s.b[80][0]++,index_r==endCell[0])&&(cov_1hyt7v392s.b[80][1]++,index_c==endCell[1])){cov_1hyt7v392s.b[79][0]++;cov_1hyt7v392s.s[244]++;games[gameId]["path"].push(oldPath.concat([[row,col],[index_r,index_c]]));}else{cov_1hyt7v392s.b[79][1]++;cov_1hyt7v392s.s[245]++;access_cell.push([index_r,index_c]);}}else{cov_1hyt7v392s.b[75][1]++;}}else{cov_1hyt7v392s.b[73][1]++;}}}cov_1hyt7v392s.s[246]++;return(cov_1hyt7v392s.b[81][0]++,getJumps(games,gameId,cells.slice(1),endCell,oldPath))||(cov_1hyt7v392s.b[81][1]++,getJumps(games,gameId,access_cell,endCell,oldPath.concat([cells[0]])));}function hasWon(games,gameId,color){cov_1hyt7v392s.f[23]++;var row,col;var n=(cov_1hyt7v392s.s[247]++,color%2?(cov_1hyt7v392s.b[82][0]++,color):(cov_1hyt7v392s.b[82][1]++,color-2));cov_1hyt7v392s.s[248]++;for(var i=0;i<10;i++){cov_1hyt7v392s.s[249]++;row=TRIANGLES_COORDS[n][i][0];cov_1hyt7v392s.s[250]++;col=TRIANGLES_COORDS[n][i][1];cov_1hyt7v392s.s[251]++;if(games[gameId]["gameBoard"][row][col]!=color){cov_1hyt7v392s.b[83][0]++;cov_1hyt7v392s.s[252]++;return false;}else{cov_1hyt7v392s.b[83][1]++;}}cov_1hyt7v392s.s[253]++;for(n=0;n<games[gameId]["COLORS"][games[gameId]["player"]].length;n++){cov_1hyt7v392s.s[254]++;if(games[gameId]["COLORS"][games[gameId]["player"]][n]===color){cov_1hyt7v392s.b[84][0]++;cov_1hyt7v392s.s[255]++;games[gameId]["gameState"][games[gameId]["player"]][n]=true;}else{cov_1hyt7v392s.b[84][1]++;}}cov_1hyt7v392s.s[256]++;return!(games[gameId]["gameState"][games[gameId]["player"]].indexOf(false)>-1);}function isOnGameBoard(cell){cov_1hyt7v392s.f[24]++;cov_1hyt7v392s.s[257]++;return(cov_1hyt7v392s.b[85][0]++,cell[0]>-1)&&(cov_1hyt7v392s.b[85][1]++,cell[0]<17)&&(cov_1hyt7v392s.b[85][2]++,cell[1]>-1)&&(cov_1hyt7v392s.b[85][3]++,cell[1]<25);}function contains(array,element){cov_1hyt7v392s.f[25]++;var i=(cov_1hyt7v392s.s[258]++,array.length);cov_1hyt7v392s.s[259]++;while(i--){cov_1hyt7v392s.s[260]++;if((cov_1hyt7v392s.b[87][0]++,array[i][0]==element[0])&&(cov_1hyt7v392s.b[87][1]++,array[i][1]==element[1])){cov_1hyt7v392s.b[86][0]++;cov_1hyt7v392s.s[261]++;return true;}else{cov_1hyt7v392s.b[86][1]++;}}cov_1hyt7v392s.s[262]++;return false;}function sendScore(games,gameId,winner,callback){cov_1hyt7v392s.f[26]++;var name=(cov_1hyt7v392s.s[263]++,encodeURIComponent(winner.name));var score=(cov_1hyt7v392s.s[264]++,encodeURIComponent(winner.score));var adversaires=(cov_1hyt7v392s.s[265]++,games[gameId]["PLAYERS"].filter(item=>{cov_1hyt7v392s.f[27]++;cov_1hyt7v392s.s[266]++;return item!==winner;}));cov_1hyt7v392s.s[267]++;adversaires.forEach(function(value,index,array){cov_1hyt7v392s.f[28]++;cov_1hyt7v392s.s[268]++;array[index]=encodeURIComponent(value.name);});var request=(cov_1hyt7v392s.s[269]++,http.get('http://hop-hop-hop.herokuapp.com/score?name='+name+'&score='+score+'&adversaire1='+adversaires[0]+'&adversaire2='+adversaires[1]+'&adversaire3='+adversaires[2]+'&adversaire4='+adversaires[3]+'&adversaire5='+adversaires[4],function(response){cov_1hyt7v392s.f[29]++;var data=(cov_1hyt7v392s.s[270]++,'');//This will store the page we're downloading.
cov_1hyt7v392s.s[271]++;response.on('data',function(chunk){cov_1hyt7v392s.f[30]++;cov_1hyt7v392s.s[272]++;//Executed whenever a chunk is received.
data+=chunk;//Append each chunk to the data variable.
});cov_1hyt7v392s.s[273]++;response.on('end',function(){cov_1hyt7v392s.f[31]++;cov_1hyt7v392s.s[274]++;callback(null,data);});}));cov_1hyt7v392s.s[275]++;request.on('error',function(error){cov_1hyt7v392s.f[32]++;cov_1hyt7v392s.s[276]++;callback(error);});cov_1hyt7v392s.s[277]++;request.end();}function makeBestMove(games,gameId){cov_1hyt7v392s.f[33]++;cov_1hyt7v392s.s[278]++;if(!games[gameId]["isPlayedByIa"][games[gameId]["player"]]){cov_1hyt7v392s.b[88][0]++;cov_1hyt7v392s.s[279]++;return;}else{cov_1hyt7v392s.b[88][1]++;}cov_1hyt7v392s.s[280]++;if(games[gameId]["gameOver"]){cov_1hyt7v392s.b[89][0]++;cov_1hyt7v392s.s[281]++;return;}else{cov_1hyt7v392s.b[89][1]++;}// Isover
cov_1hyt7v392s.s[282]++;games[gameId]["isIaPlaying"]=true;var i,j,k;// var pour itération
var maxWeight=(cov_1hyt7v392s.s[283]++,-99),selectedMove;// meilleur poid et chemin depart arrivé correspondant
var x,y,x0,y0,weight=(cov_1hyt7v392s.s[284]++,0),n;var xDirection,yDirection,axis,axis0;// géométrie
var count=(cov_1hyt7v392s.s[285]++,0);// pour avoir une idée sur le nombre d'itération
cov_1hyt7v392s.s[286]++;for(i=0;i<17;i++){cov_1hyt7v392s.s[287]++;// parcourt du plateau
for(j=0;j<25;j++){cov_1hyt7v392s.s[288]++;if(games[gameId]["COLORS"][games[gameId]["player"]].indexOf(games[gameId]["gameBoard"][i][j])>-1){cov_1hyt7v392s.b[90][0]++;cov_1hyt7v392s.s[289]++;// si pion de l'IA
games[gameId]["playedColor"]=games[gameId]["gameBoard"][i][j];// fait semblant qu'on va le déplacer
cov_1hyt7v392s.s[290]++;games[gameId]["gameBoard"][i][j]=-1;//  (i, j) cellule depart
cov_1hyt7v392s.s[291]++;getPath(games,gameId,[i,j],[-1,-1]);// set in reachableCells all reachable cell
cov_1hyt7v392s.s[292]++;games[gameId]["gameBoard"][i][j]=games[gameId]["playedColor"];// rétablir la valeur initiale
cov_1hyt7v392s.s[293]++;for(k=0;k<games[gameId]["reachableCells"].length;k++){cov_1hyt7v392s.s[294]++;// set weight // compare  (pour toute cellule accesible accorde un poid
n=games[gameId]["playedColor"]%2?(cov_1hyt7v392s.b[91][0]++,games[gameId]["playedColor"]):(cov_1hyt7v392s.b[91][1]++,games[gameId]["playedColor"]-2);cov_1hyt7v392s.s[295]++;x0=TRIANGLES_COORDS[n][0][0];cov_1hyt7v392s.s[296]++;y0=TRIANGLES_COORDS[n][0][1];// (x0, y0) pointe du triangle opposé // on souhaite diminuer au max la distance
cov_1hyt7v392s.s[297]++;xDirection=games[gameId]["playedColor"]%2?(cov_1hyt7v392s.b[92][0]++,1):(cov_1hyt7v392s.b[92][1]++,-1);// dans quelle direction vont les x? selon les couleur (1, 3, 5 direction +1, 2, 4, 6 direction -1
cov_1hyt7v392s.s[298]++;yDirection=games[gameId]["playedColor"]%3?(cov_1hyt7v392s.b[93][0]++,games[gameId]["playedColor"]<3?(cov_1hyt7v392s.b[94][0]++,0):(cov_1hyt7v392s.b[94][1]++,-1)):(cov_1hyt7v392s.b[93][1]++,1);// dans quelle direction vont les y? selon les couleur (1, 2:aucun effet 3,6: +1 4, 5:-1
cov_1hyt7v392s.s[299]++;axis=-3*xDirection*yDirection;// ce code trouve l'equation de la droite allant de la pointe du home a la pointe de l'opposé
cov_1hyt7v392s.s[300]++;axis0=-axis*8-12;cov_1hyt7v392s.s[301]++;count+=1;cov_1hyt7v392s.s[302]++;x=games[gameId]["reachableCells"][k][0];cov_1hyt7v392s.s[303]++;y=games[gameId]["reachableCells"][k][1];// (x, y) cellule accesible a partir de (i, j)
cov_1hyt7v392s.s[304]++;weight=10*(xDirection*(x-i)+yDirection*(y-j));// main direction, selon les option xDirection, et yDirection
cov_1hyt7v392s.s[305]++;weight+=10*(Math.pow(i-x0,2)+Math.pow(j-y0,2)/3);// max distance from depart
cov_1hyt7v392s.s[306]++;weight-=10*(Math.pow(x-x0,2)+Math.pow(y-y0,2)/3);// min distance de la case accesible à la pointe (ds le meilleur cas val=0
// le code suivant pour rester sur la ligne droite entre le home et l'oppossé
cov_1hyt7v392s.s[307]++;weight+=15*(Math.pow(axis*i+j+axis0,2)/(Math.pow(axis,2)+3));// privilégier le spions les plus éloignés
cov_1hyt7v392s.s[308]++;weight-=15*(Math.pow(axis*x+y+axis0,2)/(Math.pow(axis,2)+3));// privilégier les positions les plus proches
cov_1hyt7v392s.s[309]++;if(weight>maxWeight){cov_1hyt7v392s.b[95][0]++;cov_1hyt7v392s.s[310]++;// compare
maxWeight=weight;cov_1hyt7v392s.s[311]++;selectedMove=[[i,j],x,y];}else{cov_1hyt7v392s.b[95][1]++;}}}else{cov_1hyt7v392s.b[90][1]++;}}}cov_1hyt7v392s.s[312]++;games[gameId]["playedColor"]=games[gameId]["gameBoard"][selectedMove[0][0]][selectedMove[0][1]];// ici on valide le meilleur choix
cov_1hyt7v392s.s[313]++;console.log(count+" scénarios evaluated");cov_1hyt7v392s.s[314]++;games[gameId]["gameBoard"][selectedMove[0][0]][selectedMove[0][1]]=-1;cov_1hyt7v392s.s[315]++;path=getPath(games,gameId,selectedMove[0],[selectedMove[1],selectedMove[2]]);cov_1hyt7v392s.s[316]++;games[gameId]["history"][games[gameId]["player"]]=path;cov_1hyt7v392s.s[317]++;games[gameId]["Time"]+=500*(path.length-1);cov_1hyt7v392s.s[318]++;move(games,gameId,path,games[gameId]["playedColor"]);cov_1hyt7v392s.s[319]++;setTimeout(function(){cov_1hyt7v392s.f[34]++;cov_1hyt7v392s.s[320]++;io.sockets.in(gameId).emit('move',{path:path,playedColor:games[gameId]["playedColor"]});cov_1hyt7v392s.s[321]++;games[gameId]["isIaPlaying"]=false;},games[gameId]["Time"]);cov_1hyt7v392s.s[322]++;games[gameId]["PLAYERS"][games[gameId]["player"]].score+=1;cov_1hyt7v392s.s[323]++;if(hasWon(games,gameId,games[gameId]["playedColor"])){cov_1hyt7v392s.b[96][0]++;cov_1hyt7v392s.s[324]++;games[gameId]["gameOver"]=true;cov_1hyt7v392s.s[325]++;setTimeout(function(){cov_1hyt7v392s.f[35]++;cov_1hyt7v392s.s[326]++;io.sockets.in(gameId).emit('end game',{winner:games[gameId]["player"],score:games[gameId]["PLAYERS"][games[gameId]["player"]].score});},games[gameId]["Time"]);cov_1hyt7v392s.s[327]++;sendScore(games,gameId,games[gameId]["PLAYERS"][games[gameId]["player"]],(error,data)=>{cov_1hyt7v392s.f[36]++;cov_1hyt7v392s.s[328]++;// factoriser
if(error){cov_1hyt7v392s.b[97][0]++;cov_1hyt7v392s.s[329]++;console.log('Echec de l\'envoi des scores à la BDD');}else{cov_1hyt7v392s.b[97][1]++;cov_1hyt7v392s.s[330]++;console.log('Envoi des scores à la BDD :',data);}});cov_1hyt7v392s.s[331]++;return true;// pourquoi pas juste return ?
}else{cov_1hyt7v392s.b[96][1]++;}cov_1hyt7v392s.s[332]++;games[gameId]["player"]=(games[gameId]["player"]+1)%games[gameId]["numPlayers"];cov_1hyt7v392s.s[333]++;setTimeout(function(){cov_1hyt7v392s.f[37]++;cov_1hyt7v392s.s[334]++;io.sockets.in(gameId).emit('new turn',{player:games[gameId]["player"]});},games[gameId]["Time"]);cov_1hyt7v392s.s[335]++;games[gameId]["startCell"]=0;}function validateMove(io,clients,games,gameId,socket,cell){cov_1hyt7v392s.f[38]++;var player=(cov_1hyt7v392s.s[336]++,games[gameId]["player"]);cov_1hyt7v392s.s[337]++;if((cov_1hyt7v392s.b[99][0]++,player!==clients[socket.id]["number"])||(cov_1hyt7v392s.b[99][1]++,games[gameId]["isIaPlaying"])){cov_1hyt7v392s.b[98][0]++;cov_1hyt7v392s.s[338]++;socket.emit('game error',{message:'wait for your turn',sound:"fail"});cov_1hyt7v392s.s[339]++;return;}else{cov_1hyt7v392s.b[98][1]++;}var row=(cov_1hyt7v392s.s[340]++,cell[0]);var col=(cov_1hyt7v392s.s[341]++,cell[1]);var startCell=(cov_1hyt7v392s.s[342]++,games[gameId]["startCell"]);var COLORS=(cov_1hyt7v392s.s[343]++,games[gameId]["COLORS"]);var playedColor=(cov_1hyt7v392s.s[344]++,games[gameId]["playedColor"]);var gameBoard=(cov_1hyt7v392s.s[345]++,games[gameId]["gameBoard"]);var history=(cov_1hyt7v392s.s[346]++,games[gameId]["history"]);var Time=(cov_1hyt7v392s.s[347]++,games[gameId]["Time"]);var isPlayedByIa=(cov_1hyt7v392s.s[348]++,games[gameId]["isPlayedByIa"]);cov_1hyt7v392s.s[349]++;if(startCell===0){cov_1hyt7v392s.b[100][0]++;cov_1hyt7v392s.s[350]++;// premier click
if(!(COLORS[player].indexOf(gameBoard[row][col])>-1)){cov_1hyt7v392s.b[101][0]++;cov_1hyt7v392s.s[351]++;// vérifie qu'on click sur le pion du joueur qui a la main
if(!isPlayedByIa[player]){cov_1hyt7v392s.b[102][0]++;cov_1hyt7v392s.s[352]++;socket.emit('game error',{message:"please click on your own pieces",sound:"fail"});}else{cov_1hyt7v392s.b[102][1]++;cov_1hyt7v392s.s[353]++;socket.emit('game error',{message:"please wait until computer finish playing",sound:"fail"});}cov_1hyt7v392s.s[354]++;return false;}else{cov_1hyt7v392s.b[101][1]++;}cov_1hyt7v392s.s[355]++;games[gameId]["startCell"]=[row,col];cov_1hyt7v392s.s[356]++;socket.emit('select',{cell:[row,col]});cov_1hyt7v392s.s[357]++;games[gameId]["playedColor"]=gameBoard[row][col];cov_1hyt7v392s.s[358]++;games[gameId]["gameBoard"][row][col]=-1;cov_1hyt7v392s.s[359]++;return false;// marquer la case depart vide pour ne pas l'utiliser comme pivot dans getJumps()
}else{cov_1hyt7v392s.b[100][1]++;cov_1hyt7v392s.s[360]++;if((cov_1hyt7v392s.b[104][0]++,startCell[0]===row)&&(cov_1hyt7v392s.b[104][1]++,startCell[1]===col)){cov_1hyt7v392s.b[103][0]++;cov_1hyt7v392s.s[361]++;// retour à la case départ annule le mouvement
games[gameId]["gameBoard"][row][col]=playedColor;cov_1hyt7v392s.s[362]++;games[gameId]["startCell"]=0;cov_1hyt7v392s.s[363]++;socket.emit('deselect',{cell:[row,col],color:playedColor});cov_1hyt7v392s.s[364]++;return false;}else{cov_1hyt7v392s.b[103][1]++;}cov_1hyt7v392s.s[365]++;if(gameBoard[row][col]!==-1){cov_1hyt7v392s.b[105][0]++;cov_1hyt7v392s.s[366]++;// cell not empty
socket.emit('game error',{message:"Cell not empty!",sound:"fail"});cov_1hyt7v392s.s[367]++;return false;}else{cov_1hyt7v392s.b[105][1]++;}cov_1hyt7v392s.s[368]++;if(isMovingBackward(playedColor,startCell,[row,col])){cov_1hyt7v392s.b[106][0]++;cov_1hyt7v392s.s[369]++;// mouvement illégal en réculant
socket.emit('game error',{message:"You can't go back!",sound:"fail"});cov_1hyt7v392s.s[370]++;return false;}else{cov_1hyt7v392s.b[106][1]++;}cov_1hyt7v392s.s[371]++;if(!(path=getPath(games,gameId,startCell,[row,col]))){cov_1hyt7v392s.b[107][0]++;cov_1hyt7v392s.s[372]++;// mouvement invalide
socket.emit('game error',{message:"Invalid move!",sound:"fail"});cov_1hyt7v392s.s[373]++;return false;}else{cov_1hyt7v392s.b[107][1]++;}cov_1hyt7v392s.s[374]++;if(sameTraject(games,gameId,path)){cov_1hyt7v392s.b[108][0]++;cov_1hyt7v392s.s[375]++;socket.emit('game error',{message:"You can't replay the last move",sound:"fail"});cov_1hyt7v392s.s[376]++;return false;}else{cov_1hyt7v392s.b[108][1]++;}cov_1hyt7v392s.s[377]++;games[gameId]["history"][player]=path;cov_1hyt7v392s.s[378]++;games[gameId]["Time"]=500*(path.length-1);cov_1hyt7v392s.s[379]++;move(games,gameId,path,games[gameId]["playedColor"]);cov_1hyt7v392s.s[380]++;io.sockets.in(gameId).emit('move',{path:path,playedColor:games[gameId]["playedColor"]});cov_1hyt7v392s.s[381]++;games[gameId]["PLAYERS"][player].score+=1;cov_1hyt7v392s.s[382]++;if(hasWon(games,gameId,playedColor)){cov_1hyt7v392s.b[109][0]++;cov_1hyt7v392s.s[383]++;games[gameId]["gameOver"]=true;cov_1hyt7v392s.s[384]++;io.sockets.in(gameId).emit('end game',{winner:player,score:games[gameId]["PLAYERS"][player].score});cov_1hyt7v392s.s[385]++;sendScore(games,gameId,games[gameId]["PLAYERS"][player],(error,data)=>{cov_1hyt7v392s.f[39]++;cov_1hyt7v392s.s[386]++;// factoriser
if(error){cov_1hyt7v392s.b[110][0]++;cov_1hyt7v392s.s[387]++;console.log('Echec de l\'envoi des scores à la BDD');}else{cov_1hyt7v392s.b[110][1]++;cov_1hyt7v392s.s[388]++;console.log('Envoi des scores à la BDD :',data);}});cov_1hyt7v392s.s[389]++;return true;}else{cov_1hyt7v392s.b[109][1]++;}cov_1hyt7v392s.s[390]++;games[gameId]["player"]=(player+1)%games[gameId]["numPlayers"];cov_1hyt7v392s.s[391]++;io.sockets.in(gameId).emit('new turn',{player:games[gameId]["player"]});cov_1hyt7v392s.s[392]++;games[gameId]["startCell"]=0;cov_1hyt7v392s.s[393]++;return true;}}function play(io,clients,games,gameId,socket,cell){cov_1hyt7v392s.f[40]++;cov_1hyt7v392s.s[394]++;if(games[gameId]["gameOver"]){cov_1hyt7v392s.b[111][0]++;cov_1hyt7v392s.s[395]++;return false;}else{cov_1hyt7v392s.b[111][1]++;}cov_1hyt7v392s.s[396]++;if(!games[gameId]["isPlayedByIa"][games[gameId]["player"]]){cov_1hyt7v392s.b[112][0]++;cov_1hyt7v392s.s[397]++;if(!validateMove(io,clients,games,gameId,socket,cell)){cov_1hyt7v392s.b[113][0]++;cov_1hyt7v392s.s[398]++;return false;}else{cov_1hyt7v392s.b[113][1]++;}}else{cov_1hyt7v392s.b[112][1]++;}cov_1hyt7v392s.s[399]++;setTimeout(function(){cov_1hyt7v392s.f[41]++;cov_1hyt7v392s.s[400]++;makeBestMove(games,gameId);},games[gameId]["Time"]);cov_1hyt7v392s.s[401]++;if(games[gameId]["isPlayedByIa"][(games[gameId]["player"]+1)%games[gameId]["numPlayers"]]){cov_1hyt7v392s.b[114][0]++;cov_1hyt7v392s.s[402]++;setTimeout(function(){cov_1hyt7v392s.f[42]++;cov_1hyt7v392s.s[403]++;play(io,clients,games,gameId);},games[gameId]["Time"]);}else{cov_1hyt7v392s.b[114][1]++;}cov_1hyt7v392s.s[404]++;games[gameId]["Time"]=500;cov_1hyt7v392s.s[405]++;return true;}function move(games,gameId,path,playedColor){cov_1hyt7v392s.f[43]++;var previous=(cov_1hyt7v392s.s[406]++,path[0]);var actuel=(cov_1hyt7v392s.s[407]++,path[1]);cov_1hyt7v392s.s[408]++;games[gameId]["gameBoard"][previous[0]][previous[1]]=-1;cov_1hyt7v392s.s[409]++;games[gameId]["gameBoard"][actuel[0]][actuel[1]]=playedColor;cov_1hyt7v392s.s[410]++;if(path.length>2){cov_1hyt7v392s.b[115][0]++;cov_1hyt7v392s.s[411]++;move(games,gameId,path.slice(1),playedColor);}else{cov_1hyt7v392s.b[115][1]++;}}function escapeHtml(text){cov_1hyt7v392s.f[44]++;cov_1hyt7v392s.s[412]++;if(typeof text==='undefined'){cov_1hyt7v392s.b[116][0]++;cov_1hyt7v392s.s[413]++;return text;}else{cov_1hyt7v392s.b[116][1]++;}cov_1hyt7v392s.s[414]++;return text.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");}
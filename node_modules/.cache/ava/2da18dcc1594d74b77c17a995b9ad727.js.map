{"version":3,"sources":["client.game.test.js"],"names":["pug","require","rewire","Shared","Client","SOUNDS","jump","Sound","fail","win","lastPlayedSound","lastAlert","emitData","__set__","message","emit","f","t","data","push","document","write","renderFile","is","getElementById","innerHTML","createGameBoard","initGameBoard","createCell","outerHTML","restart","querySelectorAll","firstChild","style","textDecoration","display","deepEqual","undefined","gameBoard","images","src","refreshBoard","modal","span","getElementsByClassName","content","restartButton","endGame","name","cell","event","currentTarget","play","move","__get__","player","Player","createElement","colors","number","frame","createFrame","sound","querySelector","updatePlayerFrames","sendMessage"],"mappings":";;AAAA;;;;AACA;;;;;;AAEA,IAAIA,MAAMC,QAAQ,KAAR,CAAV;AACA,IAAIC,SAASD,QAAQ,QAAR,CAAb;;AAEA,IAAIE,SAASD,OAAO,cAAP,CAAb,C,CAAqC;AACrC,IAAIE,SAASF,OAAO,mBAAP,CAAb,C,CAA0C;;AAE1C,IAAIG,SAAS,EAAE;AACbC,QAAO,IAAIF,OAAOG,KAAX,CAAiB,kBAAjB,CADI;AAEXC,QAAO,IAAIJ,OAAOG,KAAX,CAAiB,iBAAjB,CAFI;AAGXE,OAAM,IAAIL,OAAOG,KAAX,CAAiB,gBAAjB;AAHK,CAAb;;AAMA,IAAIG,eAAJ;AACA,IAAIC,SAAJ;AACA,IAAIC,WAAW,EAAf;;AAEAR,OAAOS,OAAP,CAAe,QAAf,EAAyBV,MAAzB;AACAC,OAAOS,OAAP,CAAe,QAAf,EAAyBR,MAAzB;AACAD,OAAOS,OAAP,CAAe,OAAf,EAAwB,KAAxB;AACAT,OAAOS,OAAP,CAAe,iBAAf,EAAkC,MAAM;AAACH,oBAAgB,KAAhB;AAAsB,CAA/D;AACAN,OAAOS,OAAP,CAAe,kBAAf,EAAmC,MAAM;AAACH,oBAAgB,MAAhB;AAAuB,CAAjE;AACAN,OAAOS,OAAP,CAAe,kBAAf,EAAmC,MAAM;AAACH,oBAAgB,MAAhB;AAAuB,CAAjE;AACAN,OAAOS,OAAP,CAAe,OAAf,EAAyBC,OAAD,IAAa;AAACH,cAAYG,OAAZ;AAAoB,CAA1D;AACAV,OAAOS,OAAP,CAAe,QAAf,EAAyB;AACvBE,QAAOA;AADgB,CAAzB;AAGAX,OAAOS,OAAP,CAAe,YAAf,EAA6B,CAACG,CAAD,EAAGC,CAAH,KAAS;AAACD;AAAI,CAA3C;;AAEA;;AAEA,SAASD,IAAT,CAAcD,OAAd,EAAsBI,IAAtB,EAA4B;AACxBN,WAASO,IAAT,CAAc,CAACL,OAAD,EAASI,IAAT,CAAd;AACH;;AAED,mBAAK,yBAAL,EAAgCD,KAAK;AACnCG,WAASC,KAAT,CAAerB,IAAIsB,UAAJ,CAAe,mBAAf,EAAoC,EAApC,CAAf,EADmC,CACsB;AACzDL,IAAEM,EAAF,CAAKH,SAASI,cAAT,CAAwB,OAAxB,EAAiCC,SAAtC,EAAiD,EAAjD;AACArB,SAAOsB,eAAP,CAAuBvB,OAAOwB,aAAP,EAAvB;AACAV,IAAEM,EAAF,CAAKH,SAASI,cAAT,CAAwB,OAAxB,EAAiCC,SAAtC,EAAiD,klVAAjD;AACD,CALD;;AAOA,mBAAK,sCAAL,EAA6CR,KAAK;AAClDA,IAAEM,EAAF,CAAKnB,OAAOwB,UAAP,CAAkB,CAAC,EAAD,EAAI,CAAJ,CAAlB,EAAyB,CAAzB,EAA4BC,SAAjC,EAA4C,sFAA5C;AACAZ,IAAEM,EAAF,CAAKnB,OAAOwB,UAAP,CAAkB,CAAC,CAAD,EAAG,CAAH,CAAlB,EAAwB,CAAC,CAAzB,EAA4BC,SAAjC,EAA4C,sFAA5C;AACC,CAHD;;AAKA,mBAAK,uBAAL,EAA8BZ,KAAK;AACjCG,WAASC,KAAT,CAAerB,IAAIsB,UAAJ,CAAe,mBAAf,EAAoC,EAApC,CAAf,EADiC,CACwB;AACzDF,WAASI,cAAT,CAAwB,WAAxB,EAAqCC,SAArC,GAAiD,uZAAjD;AACArB,SAAOS,OAAP,CAAe,QAAf,EAAyB,CAAzB;AACAT,SAAO0B,OAAP,CAAe,CAAf;AACAb,IAAEM,EAAF,CAAKH,SAASW,gBAAT,CAA0B,aAA1B,EAAyC,CAAzC,EAA4CC,UAA5C,CAAuDC,KAAvD,CAA6DC,cAAlE,EAAiF,WAAjF;AACAjB,IAAEM,EAAF,CAAKH,SAASW,gBAAT,CAA0B,aAA1B,EAAyC,CAAzC,EAA4CC,UAA5C,CAAuDC,KAAvD,CAA6DC,cAAlE,EAAiF,MAAjF;AACAd,WAASI,cAAT,CAAwB,WAAxB,EAAqCC,SAArC,GAAiD,uZAAjD;AACAL,WAASI,cAAT,CAAwB,OAAxB,EAAiCS,KAAjC,CAAuCE,OAAvC,GAAiD,OAAjD;AACA/B,SAAO0B,OAAP,CAAe,CAAf;AACAb,IAAEM,EAAF,CAAKH,SAASI,cAAT,CAAwB,OAAxB,EAAiCS,KAAjC,CAAuCE,OAA5C,EAAqD,MAArD;AACAlB,IAAEmB,SAAF,CAAYxB,QAAZ,EAAsB,CAAC,CAAC,iBAAD,EAAoByB,SAApB,CAAD,CAAtB;AACD,CAZD;;AAcA,mBAAK,8BAAL,EAAqCpB,KAAK;AACxC,MAAIqB,YAAYnC,OAAOwB,aAAP,EAAhB;AACA,MAAIY,SAASnC,OAAOsB,eAAP,CAAuBY,SAAvB,CAAb;AACAlC,SAAOS,OAAP,CAAe,QAAf,EAAwB0B,MAAxB;AACAtB,IAAEM,EAAF,CAAKgB,OAAO,CAAP,EAAU,EAAV,EAAcC,GAAnB,EAAwB,kBAAxB;AACAvB,IAAEM,EAAF,CAAKgB,OAAO,CAAP,EAAU,CAAV,EAAaC,GAAlB,EAAuB,mBAAvB;AACAvB,IAAEM,EAAF,CAAKgB,OAAO,CAAP,EAAU,EAAV,EAAcC,GAAnB,EAAwB,kBAAxB;AACAF,YAAU,CAAV,EAAa,EAAb,IAAmB,CAAnB;AACAA,YAAU,CAAV,EAAa,CAAb,IAAkB,CAAlB;AACAA,YAAU,CAAV,EAAa,EAAb,IAAmB,CAAnB;AACAlC,SAAOqC,YAAP,CAAoBH,SAApB;AACArB,IAAEM,EAAF,CAAKgB,OAAO,CAAP,EAAU,EAAV,EAAcC,GAAnB,EAAwB,kBAAxB;AACAvB,IAAEM,EAAF,CAAKgB,OAAO,CAAP,EAAU,CAAV,EAAaC,GAAlB,EAAuB,kBAAvB;AACAvB,IAAEM,EAAF,CAAKgB,OAAO,CAAP,EAAU,EAAV,EAAcC,GAAnB,EAAwB,kBAAxB;AACD,CAdD;;AAgBA,mBAAK,sCAAL,EAA6CvB,KAAK;AAChD,MAAIyB,QAAQtB,SAASI,cAAT,CAAwB,OAAxB,CAAZ;AACA,MAAImB,OAAOvB,SAASwB,sBAAT,CAAgC,OAAhC,EAAyC,CAAzC,CAAX;AACA,MAAIC,UAAUzB,SAASI,cAAT,CAAwB,WAAxB,CAAd;AACA,MAAIsB,gBAAgB1B,SAASI,cAAT,CAAwB,eAAxB,CAApB;AACApB,SAAO2C,OAAP;AACA9B,IAAEM,EAAF,CAAKmB,MAAMT,KAAN,CAAYE,OAAjB,EAA0B,OAA1B;AACAlB,IAAEM,EAAF,CAAKsB,QAAQpB,SAAb,EAAwB,8BAAxB;AACAR,IAAEM,EAAF,CAAKuB,cAAcb,KAAd,CAAoBE,OAAzB,EAAkC,MAAlC;AACA/B,SAAOS,OAAP,CAAe,SAAf,EAA0B,CAAC,EAACmC,MAAK,KAAN,EAAD,EAAc,EAACA,MAAK,MAAN,EAAd,CAA1B;AACA5C,SAAO2C,OAAP,CAAe,CAAf,EAAiB,EAAjB;AACA9B,IAAEM,EAAF,CAAKsB,QAAQpB,SAAb,EAAwB,2BAAxB;AACAR,IAAEM,EAAF,CAAKuB,cAAcb,KAAd,CAAoBE,OAAzB,EAAkC,QAAlC;AACD,CAbD;;AAeA,mBAAK,eAAL,EAAsBlB,KAAK;AACzBL,aAAW,EAAX;AACA,MAAIqC,OAAO7C,OAAOwB,UAAP,CAAkB,CAAC,CAAD,EAAG,EAAH,CAAlB,EAAyB,CAAzB,CAAX;AACA,MAAIsB,QAAQ;AACVC,mBAAgBF;AADN,GAAZ;AAGA7C,SAAOgD,IAAP,CAAYF,KAAZ;AACAjC,IAAEmB,SAAF,CAAYxB,QAAZ,EAAsB,CAAC,CAAC,cAAD,EAAiB,EAACqC,MAAK,CAAC,CAAD,EAAG,EAAH,CAAN,EAAjB,CAAD,CAAtB;AACD,CARD;;AAUA,mBAAK,0BAAL,EAAiChC,KAAK;AACpC,MAAIqB,YAAYnC,OAAOwB,aAAP,EAAhB;AACA,MAAIY,SAASnC,OAAOsB,eAAP,CAAuBY,SAAvB,CAAb;AACAlC,SAAOS,OAAP,CAAe,WAAf,EAA2ByB,SAA3B;AACAlC,SAAOS,OAAP,CAAe,QAAf,EAAwB0B,MAAxB;AACAnC,SAAOiD,IAAP,CAAY,CAAC,CAAC,CAAD,EAAG,EAAH,CAAD,EAAQ,CAAC,CAAD,EAAG,CAAH,CAAR,EAAc,CAAC,CAAD,EAAG,EAAH,CAAd,CAAZ,EAAkC,CAAlC;AACApC,IAAEM,EAAF,CAAKnB,OAAOkD,OAAP,CAAe,WAAf,EAA4B,CAA5B,EAA+B,EAA/B,CAAL,EAAwC,CAAC,CAAzC;AACArC,IAAEM,EAAF,CAAKnB,OAAOkD,OAAP,CAAe,WAAf,EAA4B,CAA5B,EAA+B,CAA/B,CAAL,EAAuC,CAAC,CAAxC;AACArC,IAAEM,EAAF,CAAKnB,OAAOkD,OAAP,CAAe,WAAf,EAA4B,CAA5B,EAA+B,EAA/B,CAAL,EAAwC,CAAxC;AACD,CATD;;AAWA,mBAAK,oCAAL,EAA2CrC,KAAK;AAC9CG,WAASC,KAAT,CAAerB,IAAIsB,UAAJ,CAAe,mBAAf,EAAoC,EAApC,CAAf,EAD8C,CACW;AACzD,MAAIiC,SAAS,IAAInD,OAAOoD,MAAX,CAAkB,MAAlB,EAAyB,CAAC,CAAD,EAAG,CAAH,CAAzB,EAA+B,CAA/B,EAAiCpC,SAASqC,aAAT,CAAuB,KAAvB,CAAjC,CAAb;AACAxC,IAAEM,EAAF,CAAKgC,OAAOP,IAAZ,EAAiB,MAAjB;AACA/B,IAAEmB,SAAF,CAAYmB,OAAOG,MAAnB,EAA2B,CAAC,CAAD,EAAG,CAAH,CAA3B;AACAzC,IAAEM,EAAF,CAAKgC,OAAOI,MAAZ,EAAoB,CAApB;AACA1C,IAAEM,EAAF,CAAKgC,OAAOK,KAAP,CAAa/B,SAAlB,EAA6B,aAA7B;AACA0B,SAAOM,WAAP;AACA5C,IAAEM,EAAF,CAAKH,SAASW,gBAAT,CAA0B,UAA1B,EAAsC,CAAtC,EAAyCF,SAA9C,EAAyD,+NAAzD;AACAZ,IAAEM,EAAF,CAAKgC,OAAOK,KAAP,CAAa/B,SAAlB,EAA6B,+NAA7B;AACD,CAVD;;AAYA,mBAAK,mCAAL,EAA0CZ,KAAK;AAC7C,MAAI6C,QAAQ,IAAI1D,OAAOG,KAAX,CAAiB,oBAAjB,CAAZ;AACAU,IAAEM,EAAF,CAAKuC,MAAMA,KAAN,CAAYjC,SAAjB,EAA4B,gGAA5B;AACAZ,IAAEM,EAAF,CAAKH,SAAS2C,aAAT,CAAuB,OAAvB,EAAgClC,SAArC,EAAgD,gGAAhD;AACD,CAJD;;AAMA,mBAAK,mCAAL,EAA0CZ,KAAK;AAC7CG,WAASI,cAAT,CAAwB,WAAxB,EAAqCC,SAArC,GAAiD,uZAAjD;AACArB,SAAOS,OAAP,CAAe,QAAf,EAAwB,CAAxB;AACAT,SAAO4D,kBAAP;AACA/C,IAAEM,EAAF,CAAKH,SAASW,gBAAT,CAA0B,aAA1B,EAAyC,CAAzC,EAA4CC,UAA5C,CAAuDC,KAAvD,CAA6DC,cAAlE,EAAiF,MAAjF;AACAjB,IAAEM,EAAF,CAAKH,SAASW,gBAAT,CAA0B,aAA1B,EAAyC,CAAzC,EAA4CC,UAA5C,CAAuDC,KAAvD,CAA6DC,cAAlE,EAAiF,WAAjF;AACD,CAND;;AAQA,mBAAK,qBAAL,EAA4BjB,KAAK;AAC/Bb,SAAO6D,WAAP,CAAmB,mBAAnB,EAAwC5D,OAAOI,GAA/C;AACAQ,IAAEM,EAAF,CAAKb,eAAL,EAAsB,KAAtB;AACAO,IAAEM,EAAF,CAAKZ,SAAL,EAAgB,mBAAhB;AACD,CAJD","file":"client.game.test.js","sourcesContent":["import test from 'ava';\nimport sinon from 'sinon';\n\nvar pug = require('pug');\nvar rewire = require('rewire');\n\nvar Shared = rewire('../shared.js'); // fonctions utilitaires\nvar Client = rewire('../client.game.js'); // le fichier contenant les fonctions à tester\n\nvar SOUNDS = { // sons qui seront liés aux events\n  jump : new Client.Sound(\"sounds/click.mp3\"),\n  fail : new Client.Sound(\"sounds/fail.mp3\"),\n  win : new Client.Sound(\"sounds/win.mp3\")\n}\n\nvar lastPlayedSound;\nvar lastAlert;\nvar emitData = [];\n\nClient.__set__('Shared', Shared);\nClient.__set__('SOUNDS', SOUNDS);\nClient.__set__('Muted', false);\nClient.__set__('SOUNDS.win.play', () => {lastPlayedSound='win'});\nClient.__set__('SOUNDS.fail.play', () => {lastPlayedSound='fail'});\nClient.__set__('SOUNDS.jump.play', () => {lastPlayedSound='jump'});\nClient.__set__('alert', (message) => {lastAlert = message});\nClient.__set__('socket', {\n  emit : emit\n});\nClient.__set__('setTimeout', (f,t) => {f()});\n\n// pour contourner les méthodes réseau\n\nfunction emit(message,data) {\n    emitData.push([message,data]);\n}\n\ntest('Créer le plateau de jeu', t => {\n  document.write(pug.renderFile('../views/game.pug', {})); // écrit la page de jeu dans la simulation du DOM\n  t.is(document.getElementById('board').innerHTML, '');\n  Client.createGameBoard(Shared.initGameBoard());\n  t.is(document.getElementById('board').innerHTML, '<div id=\"line0\" class=\"line\"><div class=\"cell\" line=\"0\" column=\"12\"><img alt=\"pion\" src=\"images/pion1.png\"></div></div><div id=\"line1\" class=\"line\"><div class=\"cell\" line=\"1\" column=\"11\"><img alt=\"pion\" src=\"images/pion1.png\"></div><div class=\"cell\" line=\"1\" column=\"13\"><img alt=\"pion\" src=\"images/pion1.png\"></div></div><div id=\"line2\" class=\"line\"><div class=\"cell\" line=\"2\" column=\"10\"><img alt=\"pion\" src=\"images/pion1.png\"></div><div class=\"cell\" line=\"2\" column=\"12\"><img alt=\"pion\" src=\"images/pion1.png\"></div><div class=\"cell\" line=\"2\" column=\"14\"><img alt=\"pion\" src=\"images/pion1.png\"></div></div><div id=\"line3\" class=\"line\"><div class=\"cell\" line=\"3\" column=\"9\"><img alt=\"pion\" src=\"images/pion1.png\"></div><div class=\"cell\" line=\"3\" column=\"11\"><img alt=\"pion\" src=\"images/pion1.png\"></div><div class=\"cell\" line=\"3\" column=\"13\"><img alt=\"pion\" src=\"images/pion1.png\"></div><div class=\"cell\" line=\"3\" column=\"15\"><img alt=\"pion\" src=\"images/pion1.png\"></div></div><div id=\"line4\" class=\"line\"><div class=\"cell\" line=\"4\" column=\"0\"><img alt=\"pion\" src=\"images/pion3.png\"></div><div class=\"cell\" line=\"4\" column=\"2\"><img alt=\"pion\" src=\"images/pion3.png\"></div><div class=\"cell\" line=\"4\" column=\"4\"><img alt=\"pion\" src=\"images/pion3.png\"></div><div class=\"cell\" line=\"4\" column=\"6\"><img alt=\"pion\" src=\"images/pion3.png\"></div><div class=\"cell\" line=\"4\" column=\"8\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"4\" column=\"10\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"4\" column=\"12\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"4\" column=\"14\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"4\" column=\"16\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"4\" column=\"18\"><img alt=\"pion\" src=\"images/pion5.png\"></div><div class=\"cell\" line=\"4\" column=\"20\"><img alt=\"pion\" src=\"images/pion5.png\"></div><div class=\"cell\" line=\"4\" column=\"22\"><img alt=\"pion\" src=\"images/pion5.png\"></div><div class=\"cell\" line=\"4\" column=\"24\"><img alt=\"pion\" src=\"images/pion5.png\"></div></div><div id=\"line5\" class=\"line\"><div class=\"cell\" line=\"5\" column=\"1\"><img alt=\"pion\" src=\"images/pion3.png\"></div><div class=\"cell\" line=\"5\" column=\"3\"><img alt=\"pion\" src=\"images/pion3.png\"></div><div class=\"cell\" line=\"5\" column=\"5\"><img alt=\"pion\" src=\"images/pion3.png\"></div><div class=\"cell\" line=\"5\" column=\"7\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"5\" column=\"9\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"5\" column=\"11\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"5\" column=\"13\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"5\" column=\"15\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"5\" column=\"17\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"5\" column=\"19\"><img alt=\"pion\" src=\"images/pion5.png\"></div><div class=\"cell\" line=\"5\" column=\"21\"><img alt=\"pion\" src=\"images/pion5.png\"></div><div class=\"cell\" line=\"5\" column=\"23\"><img alt=\"pion\" src=\"images/pion5.png\"></div></div><div id=\"line6\" class=\"line\"><div class=\"cell\" line=\"6\" column=\"2\"><img alt=\"pion\" src=\"images/pion3.png\"></div><div class=\"cell\" line=\"6\" column=\"4\"><img alt=\"pion\" src=\"images/pion3.png\"></div><div class=\"cell\" line=\"6\" column=\"6\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"6\" column=\"8\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"6\" column=\"10\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"6\" column=\"12\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"6\" column=\"14\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"6\" column=\"16\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"6\" column=\"18\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"6\" column=\"20\"><img alt=\"pion\" src=\"images/pion5.png\"></div><div class=\"cell\" line=\"6\" column=\"22\"><img alt=\"pion\" src=\"images/pion5.png\"></div></div><div id=\"line7\" class=\"line\"><div class=\"cell\" line=\"7\" column=\"3\"><img alt=\"pion\" src=\"images/pion3.png\"></div><div class=\"cell\" line=\"7\" column=\"5\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"7\" column=\"7\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"7\" column=\"9\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"7\" column=\"11\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"7\" column=\"13\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"7\" column=\"15\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"7\" column=\"17\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"7\" column=\"19\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"7\" column=\"21\"><img alt=\"pion\" src=\"images/pion5.png\"></div></div><div id=\"line8\" class=\"line\"><div class=\"cell\" line=\"8\" column=\"4\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"8\" column=\"6\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"8\" column=\"8\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"8\" column=\"10\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"8\" column=\"12\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"8\" column=\"14\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"8\" column=\"16\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"8\" column=\"18\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"8\" column=\"20\"><img alt=\"pion\" src=\"images/pion-1.png\"></div></div><div id=\"line9\" class=\"line\"><div class=\"cell\" line=\"9\" column=\"3\"><img alt=\"pion\" src=\"images/pion6.png\"></div><div class=\"cell\" line=\"9\" column=\"5\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"9\" column=\"7\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"9\" column=\"9\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"9\" column=\"11\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"9\" column=\"13\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"9\" column=\"15\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"9\" column=\"17\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"9\" column=\"19\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"9\" column=\"21\"><img alt=\"pion\" src=\"images/pion4.png\"></div></div><div id=\"line10\" class=\"line\"><div class=\"cell\" line=\"10\" column=\"2\"><img alt=\"pion\" src=\"images/pion6.png\"></div><div class=\"cell\" line=\"10\" column=\"4\"><img alt=\"pion\" src=\"images/pion6.png\"></div><div class=\"cell\" line=\"10\" column=\"6\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"10\" column=\"8\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"10\" column=\"10\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"10\" column=\"12\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"10\" column=\"14\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"10\" column=\"16\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"10\" column=\"18\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"10\" column=\"20\"><img alt=\"pion\" src=\"images/pion4.png\"></div><div class=\"cell\" line=\"10\" column=\"22\"><img alt=\"pion\" src=\"images/pion4.png\"></div></div><div id=\"line11\" class=\"line\"><div class=\"cell\" line=\"11\" column=\"1\"><img alt=\"pion\" src=\"images/pion6.png\"></div><div class=\"cell\" line=\"11\" column=\"3\"><img alt=\"pion\" src=\"images/pion6.png\"></div><div class=\"cell\" line=\"11\" column=\"5\"><img alt=\"pion\" src=\"images/pion6.png\"></div><div class=\"cell\" line=\"11\" column=\"7\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"11\" column=\"9\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"11\" column=\"11\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"11\" column=\"13\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"11\" column=\"15\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"11\" column=\"17\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"11\" column=\"19\"><img alt=\"pion\" src=\"images/pion4.png\"></div><div class=\"cell\" line=\"11\" column=\"21\"><img alt=\"pion\" src=\"images/pion4.png\"></div><div class=\"cell\" line=\"11\" column=\"23\"><img alt=\"pion\" src=\"images/pion4.png\"></div></div><div id=\"line12\" class=\"line\"><div class=\"cell\" line=\"12\" column=\"0\"><img alt=\"pion\" src=\"images/pion6.png\"></div><div class=\"cell\" line=\"12\" column=\"2\"><img alt=\"pion\" src=\"images/pion6.png\"></div><div class=\"cell\" line=\"12\" column=\"4\"><img alt=\"pion\" src=\"images/pion6.png\"></div><div class=\"cell\" line=\"12\" column=\"6\"><img alt=\"pion\" src=\"images/pion6.png\"></div><div class=\"cell\" line=\"12\" column=\"8\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"12\" column=\"10\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"12\" column=\"12\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"12\" column=\"14\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"12\" column=\"16\"><img alt=\"pion\" src=\"images/pion-1.png\"></div><div class=\"cell\" line=\"12\" column=\"18\"><img alt=\"pion\" src=\"images/pion4.png\"></div><div class=\"cell\" line=\"12\" column=\"20\"><img alt=\"pion\" src=\"images/pion4.png\"></div><div class=\"cell\" line=\"12\" column=\"22\"><img alt=\"pion\" src=\"images/pion4.png\"></div><div class=\"cell\" line=\"12\" column=\"24\"><img alt=\"pion\" src=\"images/pion4.png\"></div></div><div id=\"line13\" class=\"line\"><div class=\"cell\" line=\"13\" column=\"9\"><img alt=\"pion\" src=\"images/pion2.png\"></div><div class=\"cell\" line=\"13\" column=\"11\"><img alt=\"pion\" src=\"images/pion2.png\"></div><div class=\"cell\" line=\"13\" column=\"13\"><img alt=\"pion\" src=\"images/pion2.png\"></div><div class=\"cell\" line=\"13\" column=\"15\"><img alt=\"pion\" src=\"images/pion2.png\"></div></div><div id=\"line14\" class=\"line\"><div class=\"cell\" line=\"14\" column=\"10\"><img alt=\"pion\" src=\"images/pion2.png\"></div><div class=\"cell\" line=\"14\" column=\"12\"><img alt=\"pion\" src=\"images/pion2.png\"></div><div class=\"cell\" line=\"14\" column=\"14\"><img alt=\"pion\" src=\"images/pion2.png\"></div></div><div id=\"line15\" class=\"line\"><div class=\"cell\" line=\"15\" column=\"11\"><img alt=\"pion\" src=\"images/pion2.png\"></div><div class=\"cell\" line=\"15\" column=\"13\"><img alt=\"pion\" src=\"images/pion2.png\"></div></div><div id=\"line16\" class=\"line\"><div class=\"cell\" line=\"16\" column=\"12\"><img alt=\"pion\" src=\"images/pion2.png\"></div></div>');\n});\n\ntest('Créer une case sur le plateau de jeu', t => {\nt.is(Client.createCell([10,8],2).outerHTML, '<div class=\"cell\" line=\"10\" column=\"8\"><img alt=\"pion\" src=\"images/pion2.png\"></div>');\nt.is(Client.createCell([0,5],-1).outerHTML, '<div class=\"cell\" line=\"0\" column=\"5\"><img alt=\"pion\" src=\"images/pion-1.png\"></div>');\n});\n\ntest('Redémarrer une partie', t => {\n  document.write(pug.renderFile('../views/game.pug', {})); // écrit la page de jeu dans la simulation du DOM\n  document.getElementById('leftPanel').innerHTML = '<div class=\"playerInfo\" id=\"player1\"><p class=\"playerName\" style=\"text-decoration: none;\">Joueur 1</p><span class=\"playerColors\"><img class=\"imagetag\" alt=\"color\" src=\"images/pion1.png\"></span></div><div class=\"playerInfo\" id=\"player2\"><p class=\"playerName\" style=\"text-decoration: underline;\">Ordinateur</p><span class=\"playerColors\"><img class=\"imagetag\" alt=\"color\" src=\"images/pion2.png\"></span></div>'\n  Client.__set__('player', 0);\n  Client.restart(0);\n  t.is(document.querySelectorAll('.playerInfo')[0].firstChild.style.textDecoration,'underline');\n  t.is(document.querySelectorAll('.playerInfo')[1].firstChild.style.textDecoration,'none');\n  document.getElementById('leftPanel').innerHTML = '<div class=\"playerInfo\" id=\"player1\"><p class=\"playerName\" style=\"text-decoration: none;\">Joueur 1</p><span class=\"playerColors\"><img class=\"imagetag\" alt=\"color\" src=\"images/pion1.png\"></span></div><div class=\"playerInfo\" id=\"player2\"><p class=\"playerName\" style=\"text-decoration: underline;\">Ordinateur</p><span class=\"playerColors\"><img class=\"imagetag\" alt=\"color\" src=\"images/pion2.png\"></span></div>';\n  document.getElementById('modal').style.display = 'block';\n  Client.restart(1);\n  t.is(document.getElementById('modal').style.display, 'none');\n  t.deepEqual(emitData, [['restart request', undefined]]);\n});\n\ntest('Actualiser le plateau de jeu', t => {\n  var gameBoard = Shared.initGameBoard();\n  var images = Client.createGameBoard(gameBoard);\n  Client.__set__('images',images);\n  t.is(images[2][10].src, \"images/pion1.png\");\n  t.is(images[4][8].src, \"images/pion-1.png\");\n  t.is(images[0][12].src, \"images/pion1.png\");\n  gameBoard[2][10] = 2;\n  gameBoard[4][8] = 1;\n  gameBoard[0][12] = 1;\n  Client.refreshBoard(gameBoard);\n  t.is(images[2][10].src, \"images/pion2.png\");\n  t.is(images[4][8].src, \"images/pion1.png\");\n  t.is(images[0][12].src, \"images/pion1.png\");\n});\n\ntest('Afficher le message de fin de partie', t => {\n  var modal = document.getElementById('modal');\n  var span = document.getElementsByClassName(\"close\")[0];\n  var content = document.getElementById(\"modalText\");\n  var restartButton = document.getElementById(\"restartButton\");\n  Client.endGame();\n  t.is(modal.style.display, 'block');\n  t.is(content.innerHTML, \"Vous avez gagné par forfait.\");\n  t.is(restartButton.style.display, \"none\");\n  Client.__set__('PLAYERS', [{name:'Joe'},{name:'John'}]);\n  Client.endGame(1,26);\n  t.is(content.innerHTML, \"John a gagné en 26 coups.\");\n  t.is(restartButton.style.display, \"inline\");\n});\n\ntest('Jouer un coup', t => {\n  emitData = [];\n  var cell = Client.createCell([2,10],1);\n  var event = {\n    currentTarget : cell\n  };\n  Client.play(event);\n  t.deepEqual(emitData, [['move request', {cell:[2,10]}]]);\n});\n\ntest('Effectuer un déplacement', t => {\n  var gameBoard = Shared.initGameBoard();\n  var images = Client.createGameBoard(gameBoard);\n  Client.__set__('gameBoard',gameBoard);\n  Client.__set__('images',images);\n  Client.move([[0,12],[4,8],[5,10]],1);\n  t.is(Client.__get__('gameBoard')[0][12],-1);\n  t.is(Client.__get__('gameBoard')[4][8],-1);\n  t.is(Client.__get__('gameBoard')[5][10],1);\n});\n\ntest('Créer un objet de la classe Player', t => {\n  document.write(pug.renderFile('../views/game.pug', {})); // écrit la page de jeu dans la simulation du DOM\n  var player = new Client.Player('John',[1,3],1,document.createElement('div'));\n  t.is(player.name,'John');\n  t.deepEqual(player.colors, [1,3]);\n  t.is(player.number, 1);\n  t.is(player.frame.outerHTML, '<div></div>');\n  player.createFrame();\n  t.is(document.querySelectorAll('#player1')[1].outerHTML, '<div class=\"playerInfo\" id=\"player1\"><p class=\"playerName\">John</p><span class=\"playerColors\"><img class=\"imagetag\" alt=\"color\" src=\"images/pion1.png\"><img class=\"imagetag\" alt=\"color\" src=\"images/pion3.png\"></span></div>');\n  t.is(player.frame.outerHTML, '<div class=\"playerInfo\" id=\"player1\"><p class=\"playerName\">John</p><span class=\"playerColors\"><img class=\"imagetag\" alt=\"color\" src=\"images/pion1.png\"><img class=\"imagetag\" alt=\"color\" src=\"images/pion3.png\"></span></div>');\n});\n\ntest('Créer un objet de la classe Sound', t => {\n  var sound = new Client.Sound('./sounds/click.mp3');\n  t.is(sound.sound.outerHTML, '<audio src=\"./sounds/click.mp3\" preload=\"auto\" controls=\"none\" style=\"display: none;\"></audio>');\n  t.is(document.querySelector('audio').outerHTML, '<audio src=\"./sounds/click.mp3\" preload=\"auto\" controls=\"none\" style=\"display: none;\"></audio>');\n});\n\ntest('Actualiser les cadres des joueurs', t => {\n  document.getElementById('leftPanel').innerHTML = '<div class=\"playerInfo\" id=\"player1\"><p class=\"playerName\" style=\"text-decoration: underline;\">Joueur 1</p><span class=\"playerColors\"><img class=\"imagetag\" alt=\"color\" src=\"images/pion1.png\"></span></div><div class=\"playerInfo\" id=\"player2\"><p class=\"playerName\" style=\"text-decoration: none;\">Ordinateur</p><span class=\"playerColors\"><img class=\"imagetag\" alt=\"color\" src=\"images/pion2.png\"></span></div>'\n  Client.__set__('player',1);\n  Client.updatePlayerFrames();\n  t.is(document.querySelectorAll('.playerInfo')[0].firstChild.style.textDecoration,'none');\n  t.is(document.querySelectorAll('.playerInfo')[1].firstChild.style.textDecoration,'underline');\n});\n\ntest('Afficher un message', t => {\n  Client.sendMessage('Vous avez gagné !', SOUNDS.win);\n  t.is(lastPlayedSound, 'win');\n  t.is(lastAlert, 'Vous avez gagné !');\n});\n"]}